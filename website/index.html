<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ABC Standard — Agent Behavior Card Registry</title>
<meta name="description" content="The open standard for describing, discovering, and adapting AI agent behaviors across domains. Every agent behavior ever built should be discoverable, adaptable, and reusable.">
<meta property="og:title" content="ABC Standard — Agent Behavior Card Registry">
<meta property="og:description" content="The Rosetta Stone for AI agent behaviors. Stop rebuilding what already exists.">
<meta property="og:url" content="https://abcstandard.org">
<meta property="og:type" content="website">
<link rel="canonical" href="https://abcstandard.org">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js" integrity="sha384-OLBgp1GsljhM2TJ+sbHjaiH9txEUvgdDTAzHv2P24donTt6/529l+9Ua0vFImLlb" crossorigin="anonymous"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

  :root {
    --bg-deep: #030712;
    --bg-surface: #0a1628;
    --bg-card: #0d1f3c;
    --bg-card-hover: #112a4a;
    --cyan-glow: #00e5ff;
    --cyan-dim: #0097a7;
    --cyan-faint: rgba(0, 229, 255, 0.08);
    --blue-glow: #4fc3f7;
    --purple-glow: #b388ff;
    --text-primary: #e8edf5;
    --text-secondary: #8899b0;
    --text-muted: #4a5d78;
    --border: rgba(0, 229, 255, 0.12);
    --border-active: rgba(0, 229, 255, 0.35);
  }

  html { scroll-behavior: smooth; scroll-padding-top: 80px; }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Inter', -apple-system, sans-serif;
    background: var(--bg-deep);
    color: var(--text-primary);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* ===== CANVAS BACKGROUND ===== */
  #bg-canvas {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 0;
    pointer-events: none;
  }

  /* ===== HERO ===== */
  .hero {
    position: relative;
    z-index: 1;
    text-align: center;
    padding: 120px 24px 60px;
    max-width: 900px;
    margin: 0 auto;
  }

  .hero::before {
    content: '';
    position: absolute;
    top: -200px;
    left: 50%;
    transform: translateX(-50%);
    width: 800px;
    height: 600px;
    background: radial-gradient(ellipse, rgba(0, 229, 255, 0.08) 0%, rgba(0, 229, 255, 0.02) 40%, transparent 70%);
    pointer-events: none;
    z-index: -1;
  }

  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 6px 16px;
    border: 1px solid var(--border-active);
    border-radius: 100px;
    font-size: 12px;
    font-weight: 500;
    color: var(--cyan-glow);
    background: var(--cyan-faint);
    margin-bottom: 32px;
    letter-spacing: 0.5px;
    text-transform: uppercase;
  }

  .hero-badge::before {
    content: '';
    width: 6px; height: 6px;
    border-radius: 50%;
    background: var(--cyan-glow);
    box-shadow: 0 0 8px var(--cyan-glow);
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
  }

  .hero h1 {
    font-size: clamp(36px, 6vw, 64px);
    font-weight: 700;
    line-height: 1.1;
    margin-bottom: 20px;
    background: linear-gradient(135deg, #ffffff 0%, var(--cyan-glow) 50%, var(--blue-glow) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .hero p {
    font-size: 18px;
    line-height: 1.7;
    color: var(--text-secondary);
    max-width: 640px;
    margin: 0 auto 40px;
  }

  .hero-cta {
    display: inline-block;
    padding: 14px 40px;
    background: linear-gradient(135deg, var(--cyan-glow), var(--blue-glow));
    color: var(--bg-deep);
    font-size: 16px;
    font-weight: 700;
    text-decoration: none;
    border-radius: 50px;
    letter-spacing: 0.5px;
    transition: all 0.3s;
    box-shadow: 0 0 30px rgba(0, 229, 255, 0.3), 0 0 60px rgba(0, 229, 255, 0.1);
  }
  .hero-cta:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 40px rgba(0, 229, 255, 0.5), 0 0 80px rgba(0, 229, 255, 0.2);
  }

  .hero-stats {
    display: flex;
    justify-content: center;
    gap: 48px;
    margin-top: 48px;
  }

  .stat {
    text-align: center;
  }

  .stat-number {
    font-size: 36px;
    font-weight: 700;
    color: var(--cyan-glow);
    font-family: 'JetBrains Mono', monospace;
    text-shadow: 0 0 20px rgba(0, 229, 255, 0.3);
  }

  .stat-label {
    font-size: 12px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-top: 4px;
  }

  /* ===== SEARCH ===== */
  .search-section {
    position: relative;
    z-index: 1;
    max-width: 680px;
    margin: 0 auto;
    padding: 0 24px 60px;
  }

  .search-container {
    position: relative;
  }

  .search-container svg {
    position: absolute;
    left: 18px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
    width: 20px;
    height: 20px;
  }

  .search-input {
    width: 100%;
    padding: 16px 16px 16px 50px;
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    color: var(--text-primary);
    font-size: 16px;
    font-family: 'Inter', sans-serif;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .search-input::placeholder {
    color: var(--text-muted);
  }

  .search-input:focus {
    border-color: var(--cyan-glow);
    box-shadow: 0 0 0 3px rgba(0, 229, 255, 0.1), 0 0 30px rgba(0, 229, 255, 0.05);
  }

  /* ===== FILTERS ===== */
  .filters {
    position: relative;
    z-index: 1;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 24px 32px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
  }

  .filter-btn {
    padding: 8px 18px;
    border: 1px solid var(--border);
    border-radius: 100px;
    background: transparent;
    color: var(--text-secondary);
    font-size: 13px;
    font-family: 'Inter', sans-serif;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
  }

  .filter-btn:hover {
    border-color: var(--border-active);
    color: var(--text-primary);
    background: var(--cyan-faint);
  }

  .filter-btn.active {
    border-color: var(--cyan-glow);
    color: var(--cyan-glow);
    background: var(--cyan-faint);
    box-shadow: 0 0 12px rgba(0, 229, 255, 0.15);
  }

  /* ===== CARDS GRID ===== */
  .cards-section {
    position: relative;
    z-index: 1;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 24px 100px;
  }

  .cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: 20px;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 24px;
    perspective: 1200px;
  }

  .card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 28px;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
    transform-style: preserve-3d;
  }

  .card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--cyan-glow), transparent);
    opacity: 0;
    transition: opacity 0.3s;
  }

  .card:hover {
    border-color: var(--border-active);
    background: var(--bg-card-hover);
    transform: translateY(-8px) rotateX(2deg);
    box-shadow: 0 20px 60px rgba(0, 229, 255, 0.1), 0 0 1px rgba(0, 229, 255, 0.3);
  }

  .card:hover::before {
    opacity: 1;
  }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 14px;
  }

  .card-number {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--cyan-dim);
    background: var(--cyan-faint);
    padding: 3px 10px;
    border-radius: 6px;
    letter-spacing: 0.5px;
  }

  .card-version {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
  }

  .card-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 10px;
    color: var(--text-primary);
    line-height: 1.3;
  }

  .card-pattern {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 12px;
    border-radius: 6px;
    font-size: 11px;
    font-weight: 500;
    font-family: 'JetBrains Mono', monospace;
    margin-bottom: 14px;
    letter-spacing: 0.3px;
  }

  .card-pattern.constrained-resource-allocation {
    background: rgba(0, 229, 255, 0.1);
    color: var(--cyan-glow);
    border: 1px solid rgba(0, 229, 255, 0.2);
  }
  .card-pattern.anomaly-detection-and-response {
    background: rgba(255, 152, 0, 0.1);
    color: #ffb74d;
    border: 1px solid rgba(255, 152, 0, 0.2);
  }
  .card-pattern.information-synthesis-and-routing {
    background: rgba(76, 175, 80, 0.1);
    color: #81c784;
    border: 1px solid rgba(76, 175, 80, 0.2);
  }
  .card-pattern.multi-stakeholder-negotiation {
    background: rgba(179, 136, 255, 0.1);
    color: var(--purple-glow);
    border: 1px solid rgba(179, 136, 255, 0.2);
  }
  .card-pattern.sequential-decision-under-uncertainty {
    background: rgba(244, 67, 54, 0.1);
    color: #ef9a9a;
    border: 1px solid rgba(244, 67, 54, 0.2);
  }
  .card-pattern.compliance-and-constraint-checking {
    background: rgba(255, 215, 0, 0.1);
    color: #ffd54f;
    border: 1px solid rgba(255, 215, 0, 0.2);
  }
  .card-pattern.adaptive-communication {
    background: rgba(0, 188, 212, 0.1);
    color: #4dd0e1;
    border: 1px solid rgba(0, 188, 212, 0.2);
  }
  .card-pattern.pattern-matching-and-classification {
    background: rgba(233, 30, 99, 0.1);
    color: #f48fb1;
    border: 1px solid rgba(233, 30, 99, 0.2);
  }

  .card-pattern.anomaly-classification-response {
    background: rgba(244, 67, 54, 0.1);
    color: #ef9a9a;
    border: 1px solid rgba(244, 67, 54, 0.2);
  }

  .card-pattern.similarity-ranking-selection {
    background: rgba(0, 188, 212, 0.1);
    color: #80deea;
    border: 1px solid rgba(0, 188, 212, 0.2);
  }

  .card-pattern.retrieval-augmented-generation {
    background: rgba(63, 81, 181, 0.1);
    color: #9fa8da;
    border: 1px solid rgba(63, 81, 181, 0.2);
  }

  .card-pattern.adaptive-sequencing {
    background: rgba(76, 175, 80, 0.1);
    color: #a5d6a7;
    border: 1px solid rgba(76, 175, 80, 0.2);
  }

  .card-pattern.document-structure-extraction {
    background: rgba(255, 152, 0, 0.1);
    color: #ffcc80;
    border: 1px solid rgba(255, 152, 0, 0.2);
  }

  .card-pattern.temporal-signal-extraction {
    background: rgba(156, 39, 176, 0.1);
    color: #ce93d8;
    border: 1px solid rgba(156, 39, 176, 0.2);
  }

  .card-pattern.hierarchical-task-decomposition {
    background: rgba(255, 193, 7, 0.1);
    color: #ffe082;
    border: 1px solid rgba(255, 193, 7, 0.2);
  }

  .card-pattern.temporal-prediction-scheduling {
    background: rgba(0, 150, 136, 0.1);
    color: #80cbc4;
    border: 1px solid rgba(0, 150, 136, 0.2);
  }

  .card-description {
    font-size: 14px;
    line-height: 1.6;
    color: var(--text-secondary);
    margin-bottom: 18px;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .card-fork {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    color: var(--text-muted);
    padding-top: 14px;
    border-top: 1px solid var(--border);
  }

  .card-fork-arrow {
    color: var(--cyan-dim);
    font-size: 14px;
    flex-shrink: 0;
  }

  .card-fork span {
    color: var(--text-secondary);
  }

  .card-meta {
    display: flex;
    gap: 16px;
    margin-top: 12px;
    font-size: 11px;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
  }

  .card-meta-item {
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .compliance-badge {
    display: inline-block;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    padding: 3px 8px;
    border-radius: 4px;
    margin-bottom: 8px;
  }
  .badge-certified {
    background: rgba(0, 230, 118, 0.15);
    color: #00e676;
    border: 1px solid rgba(0, 230, 118, 0.3);
  }
  .badge-compatible {
    background: rgba(255, 215, 0, 0.12);
    color: #ffd740;
    border: 1px solid rgba(255, 215, 0, 0.25);
  }

  /* ===== DETAIL MODAL ===== */
  .modal-overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(3, 7, 18, 0.85);
    backdrop-filter: blur(8px);
    z-index: 100;
    display: none;
    align-items: flex-start;
    justify-content: center;
    padding: 40px 24px;
    overflow-y: auto;
  }

  .modal-overlay.active {
    display: flex;
  }

  .modal {
    background: var(--bg-surface);
    border: 1px solid var(--border-active);
    border-radius: 20px;
    max-width: 800px;
    width: 100%;
    padding: 40px;
    position: relative;
    box-shadow: 0 0 80px rgba(0, 229, 255, 0.08);
  }

  .modal-close {
    position: absolute;
    top: 20px; right: 20px;
    width: 36px; height: 36px;
    border: 1px solid var(--border);
    border-radius: 8px;
    background: transparent;
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    transition: all 0.2s;
  }

  .modal-close:hover {
    border-color: var(--cyan-glow);
    color: var(--cyan-glow);
  }

  .modal h2 {
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 8px;
    padding-right: 40px;
  }

  .modal-subtitle {
    font-size: 14px;
    color: var(--text-muted);
    margin-bottom: 24px;
    font-family: 'JetBrains Mono', monospace;
  }

  .modal-section {
    margin-bottom: 28px;
  }

  .modal-section h3 {
    font-size: 13px;
    font-weight: 600;
    color: var(--cyan-glow);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .modal-section h3::before {
    content: '';
    width: 3px;
    height: 14px;
    background: var(--cyan-glow);
    border-radius: 2px;
    box-shadow: 0 0 6px var(--cyan-glow);
  }

  .modal-section p {
    font-size: 14px;
    line-height: 1.7;
    color: var(--text-secondary);
  }

  .modal-fork-story {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 24px;
  }

  .modal-fork-label {
    font-size: 11px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
  }

  .modal-fork-flow {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 15px;
    font-weight: 500;
  }

  .modal-fork-flow .origin {
    color: var(--text-secondary);
  }

  .modal-fork-flow .arrow {
    color: var(--cyan-glow);
    font-size: 20px;
  }

  .modal-fork-flow .target {
    color: var(--cyan-glow);
  }

  .adaptation-list {
    list-style: none;
  }

  .adaptation-item {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 16px;
    margin-bottom: 10px;
  }

  .adaptation-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
  }

  .adaptation-name {
    font-weight: 600;
    font-size: 14px;
    color: var(--text-primary);
  }

  .adaptation-type {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    padding: 3px 8px;
    border-radius: 4px;
    background: var(--cyan-faint);
    color: var(--cyan-dim);
    border: 1px solid var(--border);
  }

  .adaptation-desc {
    font-size: 13px;
    line-height: 1.5;
    color: var(--text-muted);
  }

  .domain-tag-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .domain-tag {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 14px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 8px;
    font-size: 13px;
    color: var(--text-secondary);
  }

  .domain-similarity {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--cyan-dim);
  }

  .similar-cards-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .similar-card-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 14px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    transition: border-color 0.2s;
  }
  .similar-card-item:hover {
    border-color: var(--cyan-glow);
  }
  .similar-card-name {
    color: var(--text-primary);
    font-size: 13px;
    font-weight: 500;
  }
  .similar-card-badge {
    font-size: 9px;
    padding: 2px 6px;
  }

  .failure-list {
    list-style: none;
  }

  .failure-item {
    padding: 12px 16px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 10px;
    margin-bottom: 8px;
  }

  .failure-severity {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    padding: 2px 8px;
    border-radius: 4px;
    text-transform: uppercase;
    display: inline-block;
    margin-bottom: 6px;
  }

  .failure-severity.critical { background: rgba(244, 67, 54, 0.15); color: #ef5350; border: 1px solid rgba(244, 67, 54, 0.3); }
  .failure-severity.high { background: rgba(255, 152, 0, 0.15); color: #ffb74d; border: 1px solid rgba(255, 152, 0, 0.3); }
  .failure-severity.medium { background: rgba(255, 235, 59, 0.15); color: #fff176; border: 1px solid rgba(255, 235, 59, 0.3); }
  .failure-severity.high_in_humanitarian { background: rgba(255, 152, 0, 0.15); color: #ffb74d; border: 1px solid rgba(255, 152, 0, 0.3); }

  .failure-scenario {
    font-size: 13px;
    color: var(--text-primary);
    margin-bottom: 4px;
  }

  .failure-impact {
    font-size: 12px;
    color: var(--text-muted);
  }

  /* ===== FOOTER ===== */
  footer {
    position: relative;
    z-index: 1;
    text-align: center;
    padding: 40px 24px;
    border-top: 1px solid var(--border);
    color: var(--text-muted);
    font-size: 13px;
  }

  footer a {
    color: var(--cyan-dim);
    text-decoration: none;
  }

  footer a:hover {
    color: var(--cyan-glow);
  }

  /* ===== ACTION BUTTONS ===== */
  .modal-actions {
    display: flex;
    gap: 10px;
    margin-bottom: 28px;
  }

  .action-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    border-radius: 10px;
    font-size: 13px;
    font-weight: 600;
    font-family: 'Inter', sans-serif;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
  }

  .action-btn svg {
    width: 16px;
    height: 16px;
  }

  .action-btn.primary {
    background: var(--cyan-glow);
    color: var(--bg-deep);
  }

  .action-btn.primary:hover {
    box-shadow: 0 0 20px rgba(0, 229, 255, 0.4);
    transform: translateY(-1px);
  }

  .action-btn.secondary {
    background: var(--cyan-faint);
    color: var(--cyan-glow);
    border: 1px solid var(--border-active);
  }

  .action-btn.secondary:hover {
    background: rgba(0, 229, 255, 0.15);
    box-shadow: 0 0 16px rgba(0, 229, 255, 0.15);
  }

  .copy-feedback {
    color: #81c784;
    font-size: 12px;
    margin-left: 8px;
    opacity: 0;
    transition: opacity 0.3s;
  }

  .copy-feedback.show {
    opacity: 1;
  }

  .no-results {
    text-align: center;
    padding: 60px 24px;
    color: var(--text-muted);
    font-size: 16px;
  }

  /* ===== NAVIGATION ===== */
  .main-nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 50;
    padding: 0 24px;
    height: 64px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: rgba(3, 7, 18, 0.8);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border);
    transition: background 0.3s;
  }
  .main-nav.scrolled { background: rgba(3, 7, 18, 0.95); }
  .nav-logo {
    font-size: 16px;
    font-weight: 700;
    color: var(--cyan-glow);
    text-decoration: none;
    letter-spacing: -0.5px;
  }
  .nav-logo span { color: var(--text-secondary); font-weight: 400; }
  .nav-links {
    display: flex;
    gap: 32px;
    list-style: none;
  }
  .nav-links a {
    color: var(--text-secondary);
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    transition: color 0.2s;
  }
  .nav-links a:hover { color: var(--cyan-glow); }
  .hamburger {
    display: none;
    background: none;
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 8px;
    color: var(--text-secondary);
    cursor: pointer;
  }
  .hamburger svg { width: 20px; height: 20px; display: block; }

  /* ===== HOW IT WORKS ===== */
  .how-it-works {
    position: relative;
    z-index: 1;
    padding: 80px 24px;
    max-width: 1200px;
    margin: 0 auto;
  }
  .how-it-works h2 {
    text-align: center;
    font-size: 32px;
    font-weight: 700;
    margin-bottom: 12px;
    background: linear-gradient(135deg, #ffffff 0%, var(--cyan-glow) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .how-it-works .section-subtitle {
    text-align: center;
    color: var(--text-secondary);
    font-size: 16px;
    margin-bottom: 48px;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }
  .features-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 24px;
  }
  .feature-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 28px 24px;
    transition: all 0.3s ease;
  }
  .feature-card:hover {
    border-color: var(--border-active);
    transform: translateY(-2px);
    box-shadow: 0 8px 32px rgba(0, 229, 255, 0.08);
  }
  .feature-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    background: var(--cyan-faint);
    border: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 20px;
    color: var(--cyan-glow);
  }
  .feature-icon svg { width: 24px; height: 24px; }
  .feature-card h3 {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--text-primary);
  }
  .feature-card p {
    font-size: 14px;
    line-height: 1.6;
    color: var(--text-secondary);
  }

  .cards-count {
    text-align: center;
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 20px;
    position: relative;
    z-index: 1;
  }
  .cards-count span {
    color: var(--cyan-glow);
    font-weight: 600;
    font-family: 'JetBrains Mono', monospace;
  }

  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .card { opacity: 0; animation: fadeInUp 0.4s ease-out forwards; }

  .back-to-top {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 40;
    width: 44px;
    height: 44px;
    border-radius: 12px;
    background: var(--bg-card);
    border: 1px solid var(--border-active);
    color: var(--cyan-glow);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: all 0.3s;
  }
  .back-to-top.show { opacity: 1; pointer-events: auto; }
  .back-to-top:hover { background: var(--cyan-faint); transform: translateY(-2px); box-shadow: 0 4px 20px rgba(0, 229, 255, 0.2); }
  .back-to-top svg { width: 20px; height: 20px; }

  /* ===== FOOTER ===== */
  footer {
    position: relative;
    z-index: 1;
    border-top: 1px solid var(--border);
    padding: 60px 24px 30px;
  }
  .footer-grid {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr;
    gap: 40px;
    max-width: 1200px;
    margin: 0 auto 40px;
  }
  .footer-col h4 {
    font-size: 12px;
    font-weight: 600;
    color: var(--cyan-glow);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 16px;
  }
  .footer-col p { font-size: 13px; color: var(--text-muted); line-height: 1.7; }
  .footer-col ul { list-style: none; }
  .footer-col li { margin-bottom: 10px; }
  .footer-col a { color: var(--text-secondary); text-decoration: none; font-size: 13px; transition: color 0.2s; }
  .footer-col a:hover { color: var(--cyan-glow); }
  .footer-bottom {
    text-align: center;
    padding-top: 30px;
    border-top: 1px solid var(--border);
    font-size: 12px;
    color: var(--text-muted);
    max-width: 1200px;
    margin: 0 auto;
  }

  /* ===== SUBMISSION FORM ===== */
  .form-overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(3, 7, 18, 0.92);
    backdrop-filter: blur(12px);
    z-index: 110;
    display: none;
    align-items: flex-start;
    justify-content: center;
    padding: 40px 20px;
    overflow-y: auto;
  }
  .form-overlay.active { display: flex; }
  .form-container {
    background: var(--bg-surface);
    border: 1px solid var(--border-active);
    border-radius: 20px;
    width: 100%;
    max-width: 960px;
    padding: 40px;
    position: relative;
    box-shadow: 0 0 80px rgba(0, 229, 255, 0.06);
  }
  .form-close {
    position: absolute;
    top: 16px; right: 16px;
    width: 36px; height: 36px;
    border-radius: 8px;
    border: 1px solid var(--border);
    background: none;
    color: var(--text-secondary);
    cursor: pointer;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }
  .form-close:hover { border-color: var(--cyan-glow); color: var(--cyan-glow); }
  .form-header { margin-bottom: 32px; }
  .form-header h2 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 8px;
  }
  .form-header p { font-size: 14px; color: var(--text-secondary); }
  .form-progress { margin-bottom: 32px; }
  .progress-bar {
    height: 3px;
    background: var(--bg-card);
    border-radius: 2px;
    overflow: hidden;
    margin-bottom: 16px;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--cyan-glow), var(--blue-glow));
    transition: width 0.4s ease;
    border-radius: 2px;
  }
  .progress-steps {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
  }
  .progress-step {
    padding: 6px 12px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 6px;
    font-size: 11px;
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
  }
  .progress-step.active { background: var(--cyan-faint); border-color: var(--border-active); color: var(--cyan-glow); }
  .progress-step.completed { color: var(--text-secondary); border-color: rgba(0,229,255,0.2); }
  .form-body { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; }
  .form-fields { min-width: 0; }
  .form-step { display: none; }
  .form-step.active { display: block; }
  .form-step h3 { font-size: 18px; font-weight: 600; margin-bottom: 6px; }
  .form-step .step-desc { font-size: 13px; color: var(--text-muted); margin-bottom: 20px; }
  .field-group { margin-bottom: 16px; }
  .field-group label {
    display: block;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-secondary);
    margin-bottom: 5px;
  }
  .field-group label .required { color: var(--cyan-glow); }
  .field-group input, .field-group textarea, .field-group select {
    width: 100%;
    padding: 9px 12px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-primary);
    font-family: 'Inter', sans-serif;
    font-size: 13px;
    outline: none;
    transition: border-color 0.2s;
  }
  .field-group input:focus, .field-group textarea:focus, .field-group select:focus {
    border-color: var(--cyan-glow);
    box-shadow: 0 0 0 3px rgba(0,229,255,0.08);
  }
  .field-group select { cursor: pointer; }
  .field-group textarea { resize: vertical; min-height: 60px; }
  .field-group input::placeholder, .field-group textarea::placeholder { color: var(--text-muted); }
  .repeating-item {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px;
    margin-bottom: 10px;
    position: relative;
  }
  .repeating-item .remove-item {
    position: absolute;
    top: 10px; right: 10px;
    width: 24px; height: 24px;
    border-radius: 6px;
    background: rgba(244,67,54,0.1);
    border: 1px solid rgba(244,67,54,0.2);
    color: #ef5350;
    cursor: pointer;
    font-size: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }
  .repeating-item .remove-item:hover { background: rgba(244,67,54,0.2); }
  .add-item-btn {
    padding: 7px 14px;
    background: var(--cyan-faint);
    border: 1px solid var(--border-active);
    color: var(--cyan-glow);
    border-radius: 8px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 600;
    transition: all 0.2s;
    margin-bottom: 16px;
  }
  .add-item-btn:hover { background: rgba(0,229,255,0.12); }
  .yaml-panel {
    position: sticky;
    top: 20px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
    max-height: calc(100vh - 200px);
    display: flex;
    flex-direction: column;
  }
  .yaml-panel h4 {
    font-size: 12px;
    font-weight: 600;
    color: var(--cyan-glow);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 12px;
  }
  .yaml-panel pre {
    background: var(--bg-deep);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 12px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-secondary);
    line-height: 1.6;
    overflow: auto;
    flex: 1;
    white-space: pre-wrap;
    word-break: break-word;
  }
  .yaml-panel-actions { display: flex; gap: 8px; margin-top: 12px; }
  .yaml-panel-actions button {
    flex: 1;
    padding: 8px;
    border-radius: 8px;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }
  .yaml-panel-actions .btn-copy {
    background: var(--cyan-faint);
    border: 1px solid var(--border-active);
    color: var(--cyan-glow);
  }
  .yaml-panel-actions .btn-download {
    background: var(--cyan-glow);
    border: 1px solid var(--cyan-glow);
    color: var(--bg-deep);
  }
  .yaml-panel-actions button:hover { transform: translateY(-1px); }
  .form-nav {
    display: flex;
    justify-content: space-between;
    margin-top: 24px;
    padding-top: 20px;
    border-top: 1px solid var(--border);
    grid-column: 1 / -1;
  }
  .form-nav button {
    padding: 10px 24px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }
  .btn-prev {
    background: none;
    border: 1px solid var(--border);
    color: var(--text-secondary);
  }
  .btn-prev:hover { border-color: var(--border-active); color: var(--text-primary); }
  .btn-next {
    background: var(--cyan-glow);
    border: 1px solid var(--cyan-glow);
    color: var(--bg-deep);
  }
  .btn-next:hover { box-shadow: 0 0 20px rgba(0,229,255,0.3); transform: translateY(-1px); }

  @media (max-width: 768px) {
    .features-grid { grid-template-columns: repeat(2, 1fr); }
    .footer-grid { grid-template-columns: repeat(2, 1fr); }
    .form-body { grid-template-columns: 1fr; }
    .yaml-panel { position: static; max-height: 300px; }
  }
  @media (max-width: 640px) {
    .main-nav .nav-links { display: none; }
    .main-nav .nav-links.open { display: flex; position: absolute; top: 64px; left: 0; right: 0; flex-direction: column; background: rgba(3,7,18,0.98); backdrop-filter: blur(20px); padding: 16px 24px; gap: 16px; border-bottom: 1px solid var(--border); }
    .hamburger { display: flex; }
    .hero { padding: 100px 16px 40px; }
    .hero-stats { gap: 24px; }
    .stat-number { font-size: 28px; }
    .features-grid { grid-template-columns: 1fr; }
    .cards-grid { grid-template-columns: 1fr; }
    .modal { padding: 24px; }
    .modal h2 { font-size: 22px; }
    .modal-fork-flow { flex-direction: column; gap: 4px; }
    .filters { flex-wrap: nowrap; overflow-x: auto; -webkit-overflow-scrolling: touch; padding-bottom: 12px; scrollbar-width: none; }
    .filters::-webkit-scrollbar { display: none; }
    .filter-btn { white-space: nowrap; flex-shrink: 0; }
    .footer-grid { grid-template-columns: 1fr; }
    .progress-steps { gap: 4px; }
    .progress-step { padding: 4px 8px; font-size: 10px; }
    .form-container { padding: 20px; }
    .back-to-top { bottom: 20px; right: 20px; width: 40px; height: 40px; }
  }
</style>
</head>
<body>

<!-- NAVIGATION -->
<nav class="main-nav" id="main-nav">
  <a href="#" class="nav-logo">ABC <span>Registry</span></a>
  <ul class="nav-links" id="nav-links">
    <li><a href="how-it-works.html">How It Works</a></li>
    <li><a href="#cards-section">Cards</a></li>
    <li><a href="#" onclick="openSubmitForm(); return false;">Submit</a></li>
  </ul>
  <button class="hamburger" id="hamburger" onclick="document.getElementById('nav-links').classList.toggle('open')">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
  </button>
</nav>

<canvas id="bg-canvas"></canvas>

<!-- HERO -->
<section class="hero">
  <div class="hero-badge">Open Standard v0.1.0</div>
  <h1>Agent Behavior Card Registry</h1>
  <p>The Rosetta Stone for AI agent behaviors. Every agent behavior ever built should be discoverable, adaptable, and reusable — across every industry, every crisis, every team. Stop rebuilding what already exists.</p>
  <p style="font-size:15px; color:var(--cyan-dim); margin-top:-20px; margin-bottom:32px; font-style:italic;">A fraud detection engine built for fintech can become a disease outbreak detector for the WHO. A delivery route optimizer can reroute humanitarian convoys through conflict zones.</p>
  <a href="#cards-section" class="hero-cta">Get Started</a>
  <div class="hero-stats">
    <div class="stat">
      <div class="stat-number" id="card-count">35</div>
      <div class="stat-label">Behavior Cards</div>
    </div>
    <div class="stat">
      <div class="stat-number">12</div>
      <div class="stat-label">Pattern Categories</div>
    </div>
    <div class="stat">
      <div class="stat-number">35</div>
      <div class="stat-label">Domain Bridges</div>
    </div>
    <div class="stat">
      <div class="stat-number">16</div>
      <div class="stat-label">Certified</div>
    </div>
  </div>
</section>

<!-- HOW IT WORKS -->
<section class="how-it-works" id="how-it-works">
  <h2>How It Works</h2>
  <p class="section-subtitle">ABC cards are portable behavior descriptions that travel across domains, frameworks, and teams.</p>
  <div class="features-grid">
    <div class="feature-card">
      <div class="feature-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
      </div>
      <h3>Cross-Domain Discovery</h3>
      <p>Search by abstract problem pattern, not industry label. Find how a retail optimizer became a humanitarian aid allocator.</p>
    </div>
    <div class="feature-card">
      <div class="feature-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M12 3v18m-7-7l7 7 7-7"/></svg>
      </div>
      <h3>Adaptation Points</h3>
      <p>Every card documents exactly where and how to modify it — swap components, tune parameters, or extend interfaces.</p>
    </div>
    <div class="feature-card">
      <div class="feature-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M8 7h12M8 12h12M8 17h12M4 7h.01M4 12h.01M4 17h.01"/></svg>
      </div>
      <h3>Fork Stories</h3>
      <p>Each behavior includes a real adaptation narrative — how it traveled from one domain to another, and what changed along the way.</p>
    </div>
    <div class="feature-card">
      <div class="feature-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
      </div>
      <h3>Composability</h3>
      <p>Cards declare what they emit, listen to, and delegate — making it possible to wire behaviors together into multi-agent systems.</p>
    </div>
  </div>
</section>

<!-- SEARCH -->
<section class="search-section">
  <div class="search-container">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
    <input type="text" class="search-input" id="search" placeholder="Search by problem, domain, or keyword...">
  </div>
</section>

<!-- FILTERS -->
<section class="filters" id="filters">
  <button class="filter-btn active" data-filter="all">All Cards</button>
  <button class="filter-btn" data-filter="constrained-resource-allocation">Resource Allocation</button>
  <button class="filter-btn" data-filter="anomaly-detection-and-response">Anomaly Detection</button>
  <button class="filter-btn" data-filter="information-synthesis-and-routing">Info Synthesis</button>
  <button class="filter-btn" data-filter="multi-stakeholder-negotiation">Negotiation</button>
  <button class="filter-btn" data-filter="sequential-decision-under-uncertainty">Sequential Decisions</button>
  <button class="filter-btn" data-filter="compliance-and-constraint-checking">Compliance</button>
  <button class="filter-btn" data-filter="adaptive-communication">Adaptive Comms</button>
  <button class="filter-btn" data-filter="pattern-matching-and-classification">Pattern Matching</button>
</section>

<!-- CARDS -->
<section class="cards-section" id="cards-section">
  <div class="cards-count">Showing <span id="cards-shown">25</span> of <span id="cards-total">25</span> cards</div>
  <div class="cards-grid" id="cards-grid"></div>
  <div class="no-results" id="no-results" style="display:none;">
    No behavior cards match your search. <br>
    <span style="font-size:14px; margin-top:8px; display:block;">Try a different problem pattern or keyword.</span>
  </div>
</section>

<!-- DETAIL MODAL -->
<div class="modal-overlay" id="modal-overlay">
  <div class="modal" id="modal-content"></div>
</div>

<!-- SUBMISSION FORM -->
<div class="form-overlay" id="form-overlay">
  <div class="form-container">
    <button class="form-close" onclick="closeSubmitForm()">&times;</button>
    <div class="form-header">
      <h2>Submit a Behavior Card</h2>
      <p>Describe your agent behavior using the ABC standard. Fill in the form and download the YAML file.</p>
    </div>
    <div class="form-progress">
      <div class="progress-bar"><div class="progress-fill" id="progress-fill" style="width:14.28%"></div></div>
      <div class="progress-steps" id="progress-steps">
        <div class="progress-step active" data-step="1">Identity</div>
        <div class="progress-step" data-step="2">Pattern</div>
        <div class="progress-step" data-step="3">Behavior</div>
        <div class="progress-step" data-step="4">Assumptions</div>
        <div class="progress-step" data-step="5">Adaptation</div>
        <div class="progress-step" data-step="6">Trust</div>
        <div class="progress-step" data-step="7">Provenance</div>
      </div>
    </div>
    <div class="form-body">
      <div class="form-fields">
        <!-- Step 1: Identity -->
        <div class="form-step active" data-step="1">
          <h3>Identity</h3>
          <p class="step-desc">Basic information about your behavior card.</p>
          <div class="field-group">
            <label>Display Name <span class="required">*</span></label>
            <input type="text" id="f-display-name" placeholder="e.g., Inventory Rebalance Optimizer" required>
          </div>
          <div class="field-group">
            <label>Slug (auto-generated)</label>
            <input type="text" id="f-slug" placeholder="auto-generated-from-name" readonly>
          </div>
          <div class="field-group">
            <label>Version <span class="required">*</span></label>
            <input type="text" id="f-version" placeholder="1.0.0" value="1.0.0">
          </div>
          <div class="field-group">
            <label>Author Name <span class="required">*</span></label>
            <input type="text" id="f-author" placeholder="Your name">
          </div>
          <div class="field-group">
            <label>Organization</label>
            <input type="text" id="f-org" placeholder="Your organization">
          </div>
          <div class="field-group">
            <label>Tags (comma-separated)</label>
            <input type="text" id="f-tags" placeholder="optimization, logistics, resource-allocation">
          </div>
        </div>

        <!-- Step 2: Problem Pattern -->
        <div class="form-step" data-step="2">
          <h3>Problem Pattern</h3>
          <p class="step-desc">What abstract problem does this behavior solve?</p>
          <div class="field-group">
            <label>Pattern Category <span class="required">*</span></label>
            <select id="f-category">
              <option value="">Select a pattern...</option>
              <option value="constrained-resource-allocation">Constrained Resource Allocation</option>
              <option value="anomaly-detection-and-response">Anomaly Detection &amp; Response</option>
              <option value="multi-stakeholder-negotiation">Multi-Stakeholder Negotiation</option>
              <option value="information-synthesis-and-routing">Information Synthesis &amp; Routing</option>
              <option value="sequential-decision-under-uncertainty">Sequential Decision Under Uncertainty</option>
              <option value="compliance-and-constraint-checking">Compliance &amp; Constraint Checking</option>
              <option value="adaptive-communication">Adaptive Communication</option>
              <option value="pattern-matching-and-classification">Pattern Matching &amp; Classification</option>
            </select>
          </div>
          <div class="field-group">
            <label>Description <span class="required">*</span></label>
            <textarea id="f-description" rows="4" placeholder="Plain-language description of what this behavior does and what problem it solves."></textarea>
          </div>
        </div>

        <!-- Step 3: Behavior -->
        <div class="form-step" data-step="3">
          <h3>Behavior</h3>
          <p class="step-desc">Define the trigger, inputs, and outputs.</p>
          <div class="field-group">
            <label>Trigger Type <span class="required">*</span></label>
            <select id="f-trigger">
              <option value="">Select trigger...</option>
              <option value="scheduled">Scheduled</option>
              <option value="event-driven">Event-Driven</option>
              <option value="continuous">Continuous</option>
              <option value="on-demand">On-Demand</option>
            </select>
          </div>
          <label style="font-size:12px;color:var(--text-secondary);margin-bottom:8px;display:block;">Inputs</label>
          <div id="inputs-list">
            <div class="repeating-item">
              <button type="button" class="remove-item" onclick="this.parentElement.remove(); updateFormPreview();">&times;</button>
              <div class="field-group"><label>Name</label><input type="text" class="fi-name" placeholder="e.g., inventory_data"></div>
              <div class="field-group"><label>Type</label><input type="text" class="fi-type" placeholder="e.g., map&lt;location_id, quantity&gt;"></div>
              <div class="field-group"><label>Description</label><input type="text" class="fi-desc" placeholder="What this input is"></div>
            </div>
          </div>
          <button type="button" class="add-item-btn" onclick="addInput()">+ Add Input</button>
          <label style="font-size:12px;color:var(--text-secondary);margin-bottom:8px;display:block;">Outputs</label>
          <div id="outputs-list">
            <div class="repeating-item">
              <button type="button" class="remove-item" onclick="this.parentElement.remove(); updateFormPreview();">&times;</button>
              <div class="field-group"><label>Name</label><input type="text" class="fo-name" placeholder="e.g., transfer_plan"></div>
              <div class="field-group"><label>Type</label><input type="text" class="fo-type" placeholder="e.g., list&lt;transfer_order&gt;"></div>
              <div class="field-group"><label>Description</label><input type="text" class="fo-desc" placeholder="What this output is"></div>
            </div>
          </div>
          <button type="button" class="add-item-btn" onclick="addOutput()">+ Add Output</button>
        </div>

        <!-- Step 4: Domain Assumptions -->
        <div class="form-step" data-step="4">
          <h3>Domain Assumptions</h3>
          <p class="step-desc">What does this behavior assume about data, environment, and authority?</p>
          <div id="assumptions-list">
            <div class="repeating-item">
              <button type="button" class="remove-item" onclick="this.parentElement.remove(); updateFormPreview();">&times;</button>
              <div class="field-group">
                <label>Type</label>
                <select class="fa-type"><option value="data">Data</option><option value="environment">Environment</option><option value="authority">Authority</option></select>
              </div>
              <div class="field-group"><label>Assumption</label><input type="text" class="fa-assumption" placeholder="e.g., Real-time inventory data available within 4 hours"></div>
              <div class="field-group">
                <label>Strength</label>
                <select class="fa-strength"><option value="hard">Hard (behavior breaks)</option><option value="soft">Soft (degrades gracefully)</option></select>
              </div>
            </div>
          </div>
          <button type="button" class="add-item-btn" onclick="addAssumption()">+ Add Assumption</button>
        </div>

        <!-- Step 5: Adaptation Points -->
        <div class="form-step" data-step="5">
          <h3>Adaptation Points</h3>
          <p class="step-desc">Where can this behavior be modified for new domains?</p>
          <div id="adaptations-list">
            <div class="repeating-item">
              <button type="button" class="remove-item" onclick="this.parentElement.remove(); updateFormPreview();">&times;</button>
              <div class="field-group"><label>Name <span class="required">*</span></label><input type="text" class="fap-name" placeholder="e.g., demand_model"></div>
              <div class="field-group">
                <label>Type <span class="required">*</span></label>
                <select class="fap-type"><option value="swappable_component">Swappable Component</option><option value="configurable">Configurable</option><option value="extensible">Extensible</option></select>
              </div>
              <div class="field-group"><label>Description</label><textarea class="fap-desc" rows="2" placeholder="How can this component be adapted?"></textarea></div>
            </div>
          </div>
          <button type="button" class="add-item-btn" onclick="addAdaptation()">+ Add Adaptation Point</button>
        </div>

        <!-- Step 6: Trust & Failure Modes -->
        <div class="form-step" data-step="6">
          <h3>Trust &amp; Failure Modes</h3>
          <p class="step-desc">Be honest about what can go wrong. This builds trust.</p>
          <div id="failures-list">
            <div class="repeating-item">
              <button type="button" class="remove-item" onclick="this.parentElement.remove(); updateFormPreview();">&times;</button>
              <div class="field-group">
                <label>Severity <span class="required">*</span></label>
                <select class="ff-severity"><option value="critical">Critical</option><option value="high">High</option><option value="medium">Medium</option><option value="low">Low</option></select>
              </div>
              <div class="field-group"><label>Scenario <span class="required">*</span></label><input type="text" class="ff-scenario" placeholder="What fails?"></div>
              <div class="field-group"><label>Impact <span class="required">*</span></label><input type="text" class="ff-impact" placeholder="What happens?"></div>
            </div>
          </div>
          <button type="button" class="add-item-btn" onclick="addFailure()">+ Add Failure Mode</button>
        </div>

        <!-- Step 7: Provenance -->
        <div class="form-step" data-step="7">
          <h3>Provenance</h3>
          <p class="step-desc">Where did this behavior come from, and where has it been adapted?</p>
          <div class="field-group">
            <label>Origin Domain <span class="required">*</span></label>
            <input type="text" id="f-origin" placeholder="e.g., Retail Supply Chain">
          </div>
          <div class="field-group">
            <label>Original Use Case</label>
            <textarea id="f-usecase" rows="2" placeholder="What was this behavior originally built for?"></textarea>
          </div>
          <div class="field-group">
            <label>Fork Domain</label>
            <input type="text" id="f-fork" placeholder="e.g., Humanitarian Aid Distribution">
          </div>
          <div class="field-group">
            <label>Fork Notes</label>
            <textarea id="f-fork-notes" rows="2" placeholder="What changed when adapting to the new domain?"></textarea>
          </div>
          <div class="field-group">
            <label>Compatible Frameworks (comma-separated)</label>
            <input type="text" id="f-frameworks" placeholder="CrewAI, LangGraph, AutoGen">
          </div>
        </div>
      </div>

      <!-- YAML Preview Panel -->
      <div class="yaml-panel">
        <h4>Live YAML Preview</h4>
        <pre id="yaml-preview">abc_version: "0.1.0"

# Fill in the form to see your card...</pre>
        <div class="yaml-panel-actions">
          <button type="button" class="btn-copy" onclick="copyFormYAML()">Copy YAML</button>
          <button type="button" class="btn-download" onclick="downloadFormYAML()">Download .yaml</button>
        </div>
      </div>
    </div>

    <div class="form-nav">
      <button type="button" class="btn-prev" id="btn-prev" onclick="prevFormStep()" style="visibility:hidden;">&#8592; Previous</button>
      <button type="button" class="btn-next" id="btn-next" onclick="nextFormStep()">Next &#8594;</button>
    </div>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <div class="footer-grid">
    <div class="footer-col">
      <h4>About</h4>
      <p>The Agent Behavior Card Registry is an open standard for describing, discovering, and adapting AI agent behaviors across domains. Think Docker for agent behaviors.</p>
    </div>
    <div class="footer-col">
      <h4>Resources</h4>
      <ul>
        <li><a href="how-it-works.html">How It Works</a></li>
        <li><a href="#cards-section">Browse Cards</a></li>
        <li><a href="#" onclick="openSubmitForm(); return false;">Submit a Card</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Community</h4>
      <ul>
        <li><a href="#" onclick="openSubmitForm(); return false;">Contribute a Behavior</a></li>
        <li><a href="mailto:hello@abcstandard.org">Contact Us</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Legal</h4>
      <ul>
        <li><a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache 2.0 License</a></li>
        <li><a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0 (Spec)</a></li>
      </ul>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&copy; 2026 ABC Standard Contributors &middot; Because one team's solution shouldn't die in a silo.</p>
  </div>
</footer>

<script>
// ===== SECURITY: HTML SANITIZER =====
function esc(str) {
  if (typeof str !== 'string') return str;
  return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#039;');
}
function escYAML(str) {
  if (typeof str !== 'string') return str;
  return str.replace(/\\/g, '\\\\').replace(/"/g, '\\"').replace(/\n/g, '\\n').replace(/\r/g, '');
}

// ===== CARD DATA =====
const cards = [
  {
    id: "01",
    name: "Inventory Rebalance Optimizer",
    slug: "inventory-rebalance-optimizer",
    version: "1.2.0",
    pattern: "constrained-resource-allocation",
    patternLabel: "Resource Allocation",
    description: "Allocates finite resources across multiple locations to minimize stockouts while respecting budget constraints, lead times, and demand uncertainty.",
    origin: "Retail",
    fork: "Humanitarian Aid Distribution",
    originDetail: "Rebalancing seasonal consumer goods across multiple store locations",
    forkDetail: "Medical supply allocation to field hospitals in crisis zones",
    adaptationPoints: [
      { name: "demand_model", type: "swappable_component", desc: "Swap seasonal ARIMA forecast for crisis surge detector using news feeds and displacement data" },
      { name: "constraint_solver", type: "configurable", desc: "Adjust optimization horizon (1hr–90 days) and objective weights (humanitarian: stockout weight 0.9+)" },
      { name: "explanation_language", type: "swappable_component", desc: "Swap English business report for multilingual field reports via Tarjimly-style translation" }
    ],
    analogousDomains: [
      { domain: "Humanitarian Aid Distribution", similarity: 0.82 },
      { domain: "Energy Grid Balancing", similarity: 0.65 }
    ],
    failureModes: [
      { severity: "high", scenario: "Stale inventory data (>24h)", impact: "Transfer plan based on wrong stock levels" },
      { severity: "medium", scenario: "Demand forecast completely wrong (black swan)", impact: "Suboptimal allocation, potential stockouts" },
      { severity: "high_in_humanitarian", scenario: "Optimization concentrates resources in few locations", impact: "Equity concerns — some locations get nothing" }
    ],
    tags: ["optimization", "resource-allocation", "logistics", "inventory", "rebalancing"],
    frameworks: ["CrewAI", "LangGraph", "AutoGen"]
  },
  {
    id: "02",
    name: "Workforce Shift Scheduler",
    slug: "workforce-shift-scheduler",
    version: "2.0.0",
    pattern: "constrained-resource-allocation",
    patternLabel: "Resource Allocation",
    description: "Assigns people with specific skills and availability windows to time-bound roles across multiple locations, while respecting labor rules, fairness constraints, and individual preferences.",
    origin: "Retail Employee Scheduling",
    fork: "Disaster Volunteer Coordination",
    originDetail: "Scheduling part-time and full-time employees across retail store locations",
    forkDetail: "Coordinating disaster relief volunteers with dynamic availability and burnout monitoring",
    adaptationPoints: [
      { name: "constraint_engine", type: "configurable", desc: "Adjust max hours (8→12), rest periods, and fairness windows for short-term volunteer deployments" },
      { name: "skill_matcher", type: "swappable_component", desc: "Swap retail skills for humanitarian competency framework (languages, security training, first aid)" },
      { name: "wellbeing_monitor", type: "swappable_component", desc: "Replace overtime tracker with responder burnout detector tracking cumulative stress indicators" }
    ],
    analogousDomains: [
      { domain: "Disaster Volunteer Coordination", similarity: 0.78 },
      { domain: "Hospital Nurse Rostering", similarity: 0.82 },
      { domain: "Military Duty Rotation", similarity: 0.70 }
    ],
    failureModes: [
      { severity: "high", scenario: "Key skill gap unfilled — no qualified person available", impact: "Critical role empty during shift" },
      { severity: "critical", scenario: "Optimizer prioritizes coverage over individual wellbeing", impact: "Burnout, injury, or psychological harm" },
      { severity: "medium", scenario: "Unfair distribution goes undetected", impact: "Resentment, volunteer attrition" }
    ],
    tags: ["scheduling", "workforce", "optimization", "shift-planning", "volunteer"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "03",
    name: "Budget Envelope Allocator",
    slug: "budget-envelope-allocator",
    version: "2.0.0",
    pattern: "constrained-resource-allocation",
    patternLabel: "Resource Allocation",
    description: "Distributes a finite monetary budget across competing categories to maximize overall impact, respecting minimum commitments, maximum caps, and performance feedback from prior allocations.",
    origin: "Marketing Budget Optimization",
    fork: "Emergency Fund Distribution",
    originDetail: "Allocating monthly marketing budget across channels for RetailCo",
    forkDetail: "Distributing donor funds across humanitarian response sectors (health, shelter, WASH)",
    adaptationPoints: [
      { name: "impact_model", type: "swappable_component", desc: "Replace marketing ROI model with humanitarian impact estimator (DALYs averted, beneficiaries reached)" },
      { name: "constraint_handler", type: "configurable", desc: "Handle donor earmarks, government co-funding requirements, and 15-20% flexibility reserves" },
      { name: "reporting_format", type: "swappable_component", desc: "Swap marketing dashboard for donor compliance reporter matching IATI standards" }
    ],
    analogousDomains: [
      { domain: "Emergency Fund Distribution", similarity: 0.79 },
      { domain: "Government Departmental Budgeting", similarity: 0.75 },
      { domain: "Venture Capital Portfolio Allocation", similarity: 0.72 }
    ],
    failureModes: [
      { severity: "high", scenario: "Impact model overestimates returns in one category", impact: "Over-allocation to lower-impact area" },
      { severity: "high", scenario: "Donor earmarks consume most of the budget", impact: "Emerging needs can't be addressed" },
      { severity: "medium", scenario: "Cross-sector dependencies cause cascading underfunding", impact: "Savings in one area create costs in another" }
    ],
    tags: ["budget", "allocation", "optimization", "financial-planning", "resource-distribution"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "05",
    name: "Pattern Anomaly Detector",
    slug: "pattern-anomaly-detector",
    version: "2.1.0",
    pattern: "anomaly-detection-and-response",
    patternLabel: "Anomaly Detection",
    description: "Monitors streams of events over time, learns what 'normal' looks like, detects deviations from normal patterns, determines if those deviations are significant, and triggers appropriate alerts with context.",
    origin: "E-commerce Fraud Detection",
    fork: "Disease Outbreak Surveillance",
    originDetail: "Detecting fraudulent transactions in an retail e-commerce platform",
    forkDetail: "Early disease outbreak detection in rural health networks via syndromic surveillance",
    adaptationPoints: [
      { name: "baseline_model", type: "swappable_component", desc: "Swap transaction baseline for epidemiological baseline with seasonal disease incidence rates" },
      { name: "anomaly_dimensions", type: "configurable", desc: "Replace transaction velocity with symptom clusters; extend correlation window from 1hr to 7-14 days" },
      { name: "alert_channel", type: "swappable_component", desc: "Replace dashboard with SMS escalation chain for rural areas" },
      { name: "false_positive_filter", type: "swappable_component", desc: "Account for vaccination campaigns, mass gatherings, and reporting artifacts" }
    ],
    analogousDomains: [
      { domain: "Financial Fraud Detection", similarity: 0.92 },
      { domain: "Disease Outbreak Surveillance", similarity: 0.80 },
      { domain: "Cybersecurity Intrusion Detection", similarity: 0.85 },
      { domain: "Equipment Predictive Maintenance", similarity: 0.75 },
      { domain: "Environmental Monitoring", similarity: 0.70 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Real outbreak missed because it looked like a gradual trend", impact: "Delayed public health response; preventable deaths" },
      { severity: "high", scenario: "Alert fatigue causes responders to ignore real alerts", impact: "True positives missed due to too many false positives" },
      { severity: "high", scenario: "Reporting gap misinterpreted as 'no anomalies'", impact: "Silence mistaken for safety" }
    ],
    tags: ["anomaly-detection", "pattern-recognition", "alerting", "time-series", "surveillance"],
    frameworks: ["CrewAI", "LangGraph", "Apache Kafka"]
  },
  {
    id: "06",
    name: "Equipment Health Monitor",
    slug: "equipment-health-monitor",
    version: "2.0.0",
    pattern: "anomaly-detection-and-response",
    patternLabel: "Anomaly Detection",
    description: "Continuously monitors physical assets through sensor data or periodic inspections, detects degradation patterns, predicts failures before they occur, and recommends interventions prioritized by risk and cost.",
    origin: "Predictive Maintenance",
    fork: "Post-Disaster Infrastructure Assessment",
    originDetail: "Monitoring HVAC, refrigeration, and security systems across retail store locations",
    forkDetail: "Assessing structural integrity of buildings and bridges after earthquakes using field reports and drone imagery",
    adaptationPoints: [
      { name: "assessment_model", type: "swappable_component", desc: "Replace degradation curves with ATC-20 damage classification (green/yellow/red tagging)" },
      { name: "data_source", type: "swappable_component", desc: "Accept drone photos, smartphone photos, OCR'd inspection forms, and community WhatsApp reports" },
      { name: "prioritization_logic", type: "configurable", desc: "Replace cost-based factors with occupancy count, structural criticality, and aftershock vulnerability" }
    ],
    analogousDomains: [
      { domain: "Post-Disaster Infrastructure Assessment", similarity: 0.74 },
      { domain: "Fleet Vehicle Maintenance", similarity: 0.85 },
      { domain: "Utility Grid Monitoring", similarity: 0.78 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Unsafe building classified as safe", impact: "Occupants at risk of collapse" },
      { severity: "high", scenario: "Over-classification of damage causes unnecessary displacement", impact: "People kept from homes unnecessarily" },
      { severity: "critical", scenario: "Aftershock changes damage level of previously assessed building", impact: "Stale assessment creates false sense of safety" }
    ],
    tags: ["monitoring", "predictive-maintenance", "sensor-data", "infrastructure", "assessment"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "07",
    name: "Supply Chain Disruption Detector",
    slug: "supply-chain-disruption-detector",
    version: "2.0.0",
    pattern: "anomaly-detection-and-response",
    patternLabel: "Anomaly Detection",
    description: "Monitors multiple signals across a supply chain to detect disruptions before they cause downstream shortages. Correlates supplier behavior, logistics data, market signals, and external events to produce early warnings.",
    origin: "Retail Supply Chain",
    fork: "Food Security Early Warning",
    originDetail: "Monitoring delivery reliability from consumer goods suppliers and detecting seasonal disruptions",
    forkDetail: "Food security early warning using FEWS NET, WFP price monitoring, and satellite crop health data",
    adaptationPoints: [
      { name: "signal_sources", type: "swappable_component", desc: "Replace ERP feeds with FEWS NET alerts, NDVI vegetation indices, conflict data (ACLED), and displacement tracking" },
      { name: "disruption_classifier", type: "swappable_component", desc: "Use IPC food security phase classification: Minimal → Stressed → Crisis → Emergency → Famine" },
      { name: "propagation_model", type: "configurable", desc: "Extend from 2-tier supply chain to 5-6 tier food system with cross-border trade flows" }
    ],
    analogousDomains: [
      { domain: "Food Security Early Warning", similarity: 0.77 },
      { domain: "Pharmaceutical Supply Monitoring", similarity: 0.83 },
      { domain: "Energy Supply Security", similarity: 0.72 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Slow-onset crisis missed because each daily change is small", impact: "Famine conditions develop without early warning" },
      { severity: "high", scenario: "False alarm triggers premature food aid deployment", impact: "Wasted resources, market disruption from aid flooding" },
      { severity: "critical", scenario: "Conflict zone data gaps create blind spots", impact: "Most vulnerable populations invisible to the system" }
    ],
    tags: ["supply-chain", "disruption", "early-warning", "food-security", "monitoring"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "08",
    name: "Communication Triage & Router",
    slug: "comms-triage-router",
    version: "2.0.0",
    pattern: "information-synthesis-and-routing",
    patternLabel: "Info Synthesis",
    description: "Ingests incoming messages from multiple channels, classifies them by urgency and topic, extracts key information, and routes them to the right responder — while handling language barriers automatically.",
    origin: "Customer Support Routing",
    fork: "Crisis Communication Triage",
    originDetail: "Routing customer support messages to the right team member based on topic and urgency",
    forkDetail: "Multilingual crisis triage where distress messages are classified by life-or-death urgency",
    adaptationPoints: [
      { name: "urgency_classifier", type: "swappable_component", desc: "Replace retail priority with humanitarian severity scale: life-threatening → urgent medical → basic needs" },
      { name: "entity_extractor", type: "swappable_component", desc: "Extract GPS coordinates, affected people count, need types, and accessibility info" },
      { name: "translation_layer", type: "swappable_component", desc: "Integrate Tarjimly hybrid translation with human-in-the-loop for critical messages" },
      { name: "routing_strategy", type: "configurable", desc: "Reorder to language match → protection sensitivity → skill match → proximity" }
    ],
    analogousDomains: [
      { domain: "Customer Support Ticketing", similarity: 0.88 },
      { domain: "Emergency Dispatch 911", similarity: 0.78 },
      { domain: "Hospital ER Triage", similarity: 0.72 },
      { domain: "Content Moderation", similarity: 0.55 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Life-threatening message misclassified as low priority", impact: "Delayed response to someone in danger" },
      { severity: "high", scenario: "Translation error changes meaning of message", impact: "Wrong type of help sent, or wrong location" },
      { severity: "critical", scenario: "Sensitive protection case routed to wrong responder", impact: "Breach of confidentiality, potential harm" }
    ],
    tags: ["triage", "communication", "routing", "multilingual", "classification"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "10",
    name: "Daily Intelligence Briefer",
    slug: "daily-intelligence-briefer",
    version: "2.0.0",
    pattern: "information-synthesis-and-routing",
    patternLabel: "Info Synthesis",
    description: "Collects information from multiple heterogeneous sources, identifies what's new or changed, synthesizes into a structured briefing calibrated to the audience, and highlights items requiring decisions.",
    origin: "Competitive Intelligence",
    fork: "Humanitarian Sitrep Generation",
    originDetail: "Daily briefing for company leadership on competitor activity and market conditions",
    forkDetail: "Daily situation reports from multiple field sources for crisis coordination leaders",
    adaptationPoints: [
      { name: "priority_ranker", type: "swappable_component", desc: "Rank by lives at risk, access deterioration, protection concerns, and displacement movements" },
      { name: "synthesizer", type: "swappable_component", desc: "Follow standard OCHA sitrep format: situation overview, needs, response, gaps, funding" },
      { name: "delivery_channel", type: "swappable_component", desc: "Email for HQ, WhatsApp for field, SMS summary for limited connectivity, voice briefing for hands-free" }
    ],
    analogousDomains: [
      { domain: "Humanitarian Sitrep Generation", similarity: 0.80 },
      { domain: "Security Threat Briefing", similarity: 0.82 },
      { domain: "Clinical Shift Handover", similarity: 0.70 }
    ],
    failureModes: [
      { severity: "high", scenario: "Critical development buried in low-priority section", impact: "Decision-makers miss time-sensitive information" },
      { severity: "high", scenario: "Unverified information presented as confirmed", impact: "Decisions made on false information" },
      { severity: "medium", scenario: "Information overload makes briefing too long", impact: "Audience stops reading; critical items missed" }
    ],
    tags: ["intelligence", "briefing", "synthesis", "sitrep", "reporting"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "11",
    name: "Multi-Party Resource Negotiator",
    slug: "multi-party-negotiator",
    version: "2.0.0",
    pattern: "multi-stakeholder-negotiation",
    patternLabel: "Negotiation",
    description: "Facilitates agreement between multiple parties with different goals, constraints, and information. Proposes solutions that satisfy as many parties as possible, identifies blockers, and suggests compromises.",
    origin: "Supplier Pricing Negotiation",
    fork: "Humanitarian Cluster Coordination",
    originDetail: "Negotiating bulk purchase agreements with consumer goods suppliers",
    forkDetail: "Multi-org resource sharing in humanitarian cluster coordination with affected population advocacy",
    adaptationPoints: [
      { name: "fairness_metric", type: "swappable_component", desc: "Replace price efficiency with needs-proportional fairness using vulnerability indices and Sphere Standards" },
      { name: "compromise_generator", type: "swappable_component", desc: "Domain-specific patterns: temporal sharing, geographic splitting, capability-based division" },
      { name: "communication_style", type: "configurable", desc: "Adapt formality, cultural sensitivity, and language for cross-cultural humanitarian coordination" },
      { name: "precedent_engine", type: "swappable_component", desc: "Database of past humanitarian who-does-what matrices and cluster coordination patterns" }
    ],
    analogousDomains: [
      { domain: "Humanitarian Cluster Coordination", similarity: 0.75 },
      { domain: "Labor Union Negotiation", similarity: 0.70 },
      { domain: "International Treaty Negotiation", similarity: 0.60 },
      { domain: "Co-Parenting Scheduling", similarity: 0.65 }
    ],
    failureModes: [
      { severity: "high", scenario: "Agent proposes 'optimal' solution ignoring power dynamics", impact: "Weaker parties feel railroaded; agreement doesn't hold" },
      { severity: "medium", scenario: "Deadlock resolution pushes premature agreement", impact: "Bad agreement worse than no agreement" },
      { severity: "high_in_humanitarian", scenario: "Cultural communication norms cause misunderstanding", impact: "Offense, withdrawal, or false agreement" }
    ],
    tags: ["negotiation", "multi-stakeholder", "coordination", "resource-sharing", "consensus"],
    frameworks: ["CrewAI", "LangGraph", "AutoGen"]
  },
  {
    id: "15",
    name: "Project Risk Cascade Planner",
    slug: "project-risk-cascade-planner",
    version: "2.0.0",
    pattern: "sequential-decision-under-uncertainty",
    patternLabel: "Sequential Decisions",
    description: "Plans a sequence of interdependent activities where each step's outcome is uncertain and affects what's possible next. Identifies critical path risks, models cascade failures, and recommends contingency branches.",
    origin: "Construction Project Management",
    fork: "Disaster Recovery Planning",
    originDetail: "Managing construction project risks for retail store buildout",
    forkDetail: "Disaster recovery sequencing: rescue → shelter → infrastructure → services → permanent housing",
    adaptationPoints: [
      { name: "risk_model", type: "swappable_component", desc: "Incorporate seismological aftershock models, funding pipeline uncertainty, and inter-org coordination friction" },
      { name: "priority_framework", type: "configurable", desc: "Life-saving infrastructure first: life → safety → essential services → economic activity → full recovery" },
      { name: "progress_tracker", type: "swappable_component", desc: "Accept mobile forms, photo evidence, GPS-tagged reports, and satellite imagery verification" }
    ],
    analogousDomains: [
      { domain: "Disaster Recovery Planning", similarity: 0.78 },
      { domain: "Software Release Planning", similarity: 0.75 },
      { domain: "Clinical Trial Sequencing", similarity: 0.68 }
    ],
    failureModes: [
      { severity: "high", scenario: "Hidden dependency causes unexpected cascade", impact: "Multiple activities blocked simultaneously" },
      { severity: "medium", scenario: "Overly optimistic replanning after delays", impact: "Stakeholders given false hope" },
      { severity: "high", scenario: "Plan complexity exceeds coordination capacity", impact: "Organizations can't follow the plan" }
    ],
    tags: ["risk-management", "project-planning", "dependency", "sequencing", "recovery"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "04",
    name: "Fleet Route Optimizer",
    slug: "fleet-route-optimizer",
    version: "2.0.0",
    pattern: "constrained-resource-allocation",
    patternLabel: "Resource Allocation",
    description: "Optimizes routes for a fleet of vehicles to minimize total cost while satisfying delivery windows, vehicle capacity limits, driver hours regulations, and real-time road conditions.",
    origin: "RetailCo",
    fork: "Humanitarian Logistics",
    originDetail: "Routing delivery fleet for regional distribution of consumer goods to retail locations and direct-to-customer deliveries.",
    forkDetail: "Forked for humanitarian convoy routing with security risk scoring, checkpoint negotiation, conflict-aware routing, and multi-org deconfliction.",
    adaptationPoints: [
      { name: "routing_engine", type: "swappable_component", desc: "Core routing algorithm with commercial or conflict-aware alternatives" },
      { name: "road_condition_source", type: "swappable_component", desc: "Real-time road conditions from traffic APIs or field intelligence" },
      { name: "priority_logic", type: "configurable", desc: "Priority tiers for delivery prioritization and reroute thresholds" }
    ],
    analogousDomains: [
      { domain: "Delivery Logistics", similarity: 0.93 },
      { domain: "Humanitarian Convoy Routing", similarity: 0.76 },
      { domain: "Waste Collection Routing", similarity: 0.85 },
      { domain: "Mobile Health Clinic Routing", similarity: 0.78 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Route plan sends vehicle through newly dangerous area", impact: "Driver and cargo at risk" },
      { severity: "medium", scenario: "Optimization over-packs routes leaving no buffer", impact: "Cascading delays when any delivery takes longer than planned" },
      { severity: "high", scenario: "Dynamic rerouting creates conflicting instructions", impact: "Driver confusion, missed deliveries" }
    ],
    tags: ["routing", "logistics", "fleet", "optimization", "delivery"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "09",
    name: "Regulatory Compliance Checker",
    slug: "regulatory-compliance-checker",
    version: "2.0.0",
    pattern: "compliance-and-constraint-checking",
    patternLabel: "Compliance",
    description: "Continuously monitors activities against a ruleset, flags violations or potential violations, generates audit trails, and recommends corrective actions while adapting to changing regulations.",
    origin: "FinTechCo",
    fork: "Humanitarian Donor Compliance",
    originDetail: "AML/KYC transaction monitoring for a financial services platform, screening against sanctions lists and suspicious activity patterns.",
    forkDetail: "Forked for humanitarian donor compliance with donor condition engine, multi-donor reporting, exemption tracking, and partner screening.",
    adaptationPoints: [
      { name: "rule_engine", type: "swappable_component", desc: "Rule matching logic for financial AML or donor condition checking" },
      { name: "screening_service", type: "swappable_component", desc: "Entity screening against watchlists and sanctions lists" },
      { name: "reporting_format", type: "configurable", desc: "Compliance report templates (SAR or donor-specific formats)" }
    ],
    analogousDomains: [
      { domain: "Financial AML/KYC", similarity: 0.90 },
      { domain: "Humanitarian Donor Compliance", similarity: 0.78 },
      { domain: "Healthcare HIPAA Compliance", similarity: 0.80 },
      { domain: "Environmental Emissions Compliance", similarity: 0.72 }
    ],
    failureModes: [
      { severity: "critical", scenario: "True violation missed due to incomplete data", impact: "Regulatory penalties, reputational damage, potential aid diversion" },
      { severity: "high", scenario: "Overzealous screening blocks legitimate aid partner", impact: "Aid delivery delayed to vulnerable populations" },
      { severity: "high", scenario: "Rule interpretation error causes systematic miscategorization", impact: "Entire category of activities incorrectly flagged or cleared" }
    ],
    tags: ["compliance", "regulation", "audit", "verification", "monitoring"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "12",
    name: "Patient Risk Stratifier",
    slug: "patient-risk-stratifier",
    version: "2.0.0",
    pattern: "pattern-matching-and-classification",
    patternLabel: "Pattern Matching",
    description: "Scores individuals based on multiple risk factors to classify them into risk tiers, prioritize interventions, and predict which individuals are most likely to experience adverse outcomes without proactive intervention.",
    origin: "InsureTech",
    fork: "Community Health",
    originDetail: "Scoring insurance policyholders on claims risk for underwriting decisions and proactive loss prevention outreach.",
    forkDetail: "Forked for community health worker prioritization with clinical risk calculator, social determinants, mobile CHW interface, and bias auditing.",
    adaptationPoints: [
      { name: "risk_factors", type: "configurable", desc: "Factor weights and tier thresholds for risk scoring" },
      { name: "scoring_algorithm", type: "swappable_component", desc: "Actuarial risk model or clinical risk calculator" },
      { name: "output_interface", type: "swappable_component", desc: "Dashboard for underwriters or mobile priority list for CHWs" }
    ],
    analogousDomains: [
      { domain: "Insurance Risk Scoring", similarity: 0.85 },
      { domain: "Community Health Prioritization", similarity: 0.79 },
      { domain: "Credit Risk Assessment", similarity: 0.82 },
      { domain: "Student Dropout Prediction", similarity: 0.70 }
    ],
    failureModes: [
      { severity: "critical", scenario: "High-risk individual scored low due to missing data", impact: "Missed intervention; preventable adverse outcome" },
      { severity: "high", scenario: "Scoring model encodes demographic bias", impact: "Systematic under-prioritization of certain groups" },
      { severity: "critical", scenario: "Risk scores used for denial of service rather than prioritization", impact: "Vulnerable individuals excluded from care" }
    ],
    tags: ["risk-scoring", "health", "stratification", "prioritization", "triage"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "13",
    name: "Environmental Impact Monitor",
    slug: "environmental-impact-monitor",
    version: "2.0.0",
    pattern: "anomaly-detection-and-response",
    patternLabel: "Anomaly Detection",
    description: "Monitors environmental indicators against baseline conditions to detect significant deviations that signal emerging threats, distinguishes normal seasonal variation from meaningful anomalies, and triggers proportionate response protocols.",
    origin: "GreenCorp ESG",
    fork: "Climate Adaptation Warning",
    originDetail: "Continuous monitoring of corporate carbon emissions and environmental metrics for ESG reporting and sustainability tracking.",
    forkDetail: "Forked for climate adaptation early warning in vulnerable communities with satellite monitoring, climate vulnerability indices, and low-connectivity alerts.",
    adaptationPoints: [
      { name: "data_sources", type: "swappable_component", desc: "Corporate emissions sensors, satellite imagery, or community-based monitoring" },
      { name: "threshold_framework", type: "configurable", desc: "Baseline definitions and anomaly tolerance levels" },
      { name: "alert_routing", type: "swappable_component", desc: "Executive dashboards or community radio and SMS alerts" },
      { name: "impact_forecast_model", type: "swappable_component", desc: "ESG reporting calculator or crop/water/health impact models" }
    ],
    analogousDomains: [
      { domain: "Corporate ESG Compliance", similarity: 0.90 },
      { domain: "Climate Adaptation Warning", similarity: 0.77 },
      { domain: "Agricultural Yield Monitoring", similarity: 0.72 },
      { domain: "Water Quality Surveillance", similarity: 0.80 }
    ],
    failureModes: [
      { severity: "high", scenario: "Slow-onset environmental change missed by anomaly detection", impact: "Communities miss critical adaptation window" },
      { severity: "high", scenario: "False reassurance from incomplete data", impact: "Communities believe conditions are normal until crisis manifests" },
      { severity: "critical", scenario: "Impact forecast model fails to capture complex tipping points", impact: "Warning comes too late for adequate response" }
    ],
    tags: ["anomaly-detection", "climate", "environmental-monitoring", "early-warning", "adaptation"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "14",
    name: "Safety Incident Predictor",
    slug: "safety-incident-predictor",
    version: "2.0.0",
    pattern: "sequential-decision-under-uncertainty",
    patternLabel: "Sequential Decisions",
    description: "Tracks leading indicators, identifies patterns indicating elevated incident risk, and recommends time-sensitive interventions to prevent escalation across distributed information streams.",
    origin: "SafetyTech Industries",
    fork: "Conflict Early Warning",
    originDetail: "Workplace incident prediction in manufacturing plants using leading indicators to predict worker injury incidents.",
    forkDetail: "Forked for conflict escalation early warning in peacekeeping contexts with conflict indicators, diplomatic interventions, and humanitarian assistance.",
    adaptationPoints: [
      { name: "indicator_model", type: "swappable_component", desc: "Manufacturing KPIs or conflict escalation indicators" },
      { name: "cascade_model", type: "configurable", desc: "Escalation pathways and cascade-breaking interventions" },
      { name: "intervention_recommender", type: "swappable_component", desc: "Manufacturing safety protocols or diplomatic and humanitarian responses" },
      { name: "decision_support_interface", type: "swappable_component", desc: "Safety officer dashboard or peacekeeping operations briefing" }
    ],
    analogousDomains: [
      { domain: "Manufacturing Workplace Safety", similarity: 0.90 },
      { domain: "Conflict Early Warning", similarity: 0.74 },
      { domain: "Aviation Safety", similarity: 0.83 },
      { domain: "Cybersecurity Threat Prediction", similarity: 0.76 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Sudden escalation without warning indicators", impact: "Event occurs with no detectable precursor signals" },
      { severity: "high", scenario: "Model trained on past incidents missing novel patterns", impact: "Learned patterns obsolete but not recognized as such" },
      { severity: "critical", scenario: "Model bias creates systematic over-prediction for specific groups", impact: "Groups disproportionately subject to intervention and scrutiny" }
    ],
    tags: ["sequential-decision", "prediction", "incident-prevention", "early-warning", "safety"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "16",
    name: "Customer Journey Orchestrator",
    slug: "customer-journey-orchestrator",
    version: "2.0.0",
    pattern: "sequential-decision-under-uncertainty",
    patternLabel: "Sequential Decisions",
    description: "Guides individuals through a multi-stage process by predicting dropout risk at each stage, identifying barriers, and delivering personalized nudges to maintain momentum and support progression.",
    origin: "RetailTech",
    fork: "Refugee Resettlement Pathway",
    originDetail: "Guiding online shoppers through purchase funnel, predicting cart abandonment, and delivering personalized discounts and reminders.",
    forkDetail: "Forked for refugee resettlement case management with trauma-informed communication, structural barrier detection, and autonomy safeguards.",
    adaptationPoints: [
      { name: "journey_stages", type: "configurable", desc: "Stage definitions, success criteria, and typical duration per stage" },
      { name: "barrier_detector", type: "swappable_component", desc: "E-commerce abandonment predictor or humanitarian barrier detector" },
      { name: "communication_engine", type: "swappable_component", desc: "Marketing email nudger or humanitarian case worker notification" },
      { name: "dropout_predictor", type: "swappable_component", desc: "Cart abandonment model or case abandonment model" }
    ],
    analogousDomains: [
      { domain: "E-commerce Conversion", similarity: 0.90 },
      { domain: "Refugee Resettlement Pathway", similarity: 0.73 },
      { domain: "Patient Treatment Adherence", similarity: 0.78 },
      { domain: "University Enrollment Journey", similarity: 0.80 }
    ],
    failureModes: [
      { severity: "high", scenario: "Barriers are missed; dropout happens without warning", impact: "Participant lost to follow-up; case abandoned" },
      { severity: "critical", scenario: "Algorithm nudges participant toward unsuitable path", impact: "Refugee trapped in inappropriate situation due to pressure" },
      { severity: "critical", scenario: "Trauma-informed communication principles violated", impact: "Algorithmic messages re-traumatize or manipulate vulnerable individual" }
    ],
    tags: ["journey-orchestration", "sequential-decision", "personalization", "dropout-prediction", "barriers"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "17",
    name: "Dynamic Pricing Engine",
    slug: "dynamic-pricing-engine",
    version: "2.0.0",
    pattern: "sequential-decision-under-uncertainty",
    patternLabel: "Sequential Decisions",
    description: "Adjusts prices or transfer values based on demand signals, competitive or market conditions, and fairness constraints to optimize revenue or purchasing power in real time.",
    origin: "DynamicCorp",
    fork: "Humanitarian Cash Transfers",
    originDetail: "Real-time pricing optimization for online retailer adjusting prices based on demand, inventory, and competitor prices.",
    forkDetail: "Forked for humanitarian cash transfer programs — inverted objective from revenue maximization to purchasing power preservation with market basket monitoring.",
    adaptationPoints: [
      { name: "pricing_model", type: "swappable_component", desc: "Revenue maximization or purchasing power preservation objective" },
      { name: "market_signal_source", type: "swappable_component", desc: "Competitor pricing APIs or local market basket monitoring" },
      { name: "fairness_constraints", type: "configurable", desc: "Price variance ceiling, affordability floor, and price change frequency" }
    ],
    analogousDomains: [
      { domain: "E-commerce Dynamic Pricing", similarity: 0.92 },
      { domain: "Humanitarian Cash Transfers", similarity: 0.68 },
      { domain: "Airline Yield Management", similarity: 0.85 },
      { domain: "Energy Market Pricing", similarity: 0.77 }
    ],
    failureModes: [
      { severity: "high", scenario: "Algorithm raises prices during demand surge", impact: "Price-sensitive customers priced out; perceived unfairness" },
      { severity: "critical", scenario: "Transfer value insufficient to meet basic needs due to model error", impact: "Beneficiaries cannot afford food or shelter; humanitarian harm" },
      { severity: "high", scenario: "Model exploits conflict-driven price spikes", impact: "Algorithm indirectly incentivizes market disruption or hoarding" }
    ],
    tags: ["pricing", "revenue-optimization", "market-dynamics", "fairness-constraints", "humanitarian"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "18",
    name: "Travel Disruption Manager",
    slug: "travel-disruption-manager",
    version: "2.0.0",
    pattern: "information-synthesis-and-routing",
    patternLabel: "Info Synthesis",
    description: "Detects disruption events, generates alternative routing or accommodation options, matches people to resources respecting constraints, and assesses cascading impacts on broader operations or populations.",
    origin: "TravelTech Corp",
    fork: "Mass Displacement Response",
    originDetail: "Managing disruptions in corporate travel programs by automatically rebooking travelers on alternative flights and accommodations.",
    forkDetail: "Forked for humanitarian mass displacement response at scale with security constraints, family unity preservation, and cascade impact assessment.",
    adaptationPoints: [
      { name: "disruption_detector", type: "swappable_component", desc: "Flight status monitor or conflict and disaster detector" },
      { name: "option_generator", type: "swappable_component", desc: "Rebooking engine or shelter availability and safe route matcher" },
      { name: "communication_channel", type: "swappable_component", desc: "Corporate travel app or UNHCR registration and community broadcasting" },
      { name: "cascade_impact_model", type: "swappable_component", desc: "Hotel occupancy impact or humanitarian infrastructure strain model" }
    ],
    analogousDomains: [
      { domain: "Corporate Travel Management", similarity: 0.88 },
      { domain: "Mass Displacement Routing", similarity: 0.72 },
      { domain: "Event Crowd Management", similarity: 0.75 },
      { domain: "Hospital Patient Flow", similarity: 0.70 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Routing algorithm separates family members", impact: "Family trauma, children at risk, humanitarian harm" },
      { severity: "critical", scenario: "Routes people through insecure areas or unsafe shelters", impact: "Risk of injury, violence, or re-displacement" },
      { severity: "high", scenario: "Receiving shelter overwhelmed by arrivals", impact: "Water shortage, disease outbreak, secondary displacement" }
    ],
    tags: ["disruption-management", "routing", "shelter-matching", "displacement", "information-synthesis"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "19",
    name: "Adaptive Content Personalizer",
    slug: "adaptive-content-personalizer",
    version: "2.0.0",
    pattern: "adaptive-communication",
    patternLabel: "Adaptive Comms",
    description: "Segments audiences, generates tailored message variants, selects appropriate delivery channels, and incorporates cultural adaptation with feedback loops to continuously improve relevance and comprehension.",
    origin: "MarketingTech Corp",
    fork: "Public Health Messaging",
    originDetail: "Personalizing marketing content for customer segments to maximize engagement and conversion.",
    forkDetail: "Forked for public health messaging with health literacy segmentation, plain-language generation, cultural adaptation, and outcome-based feedback loops.",
    adaptationPoints: [
      { name: "segmentation_model", type: "swappable_component", desc: "Customer persona segmentation or health literacy and cultural segmentation" },
      { name: "content_generator", type: "swappable_component", desc: "Marketing copy engine or health literate plain language generator" },
      { name: "channel_selector", type: "swappable_component", desc: "Email/social/push router or low-resource channel selector" },
      { name: "feedback_loop", type: "configurable", desc: "Feedback sources, iteration frequency, and minimum feedback sample" }
    ],
    analogousDomains: [
      { domain: "Marketing Personalization", similarity: 0.90 },
      { domain: "Public Health Messaging", similarity: 0.78 },
      { domain: "Educational Content Adaptation", similarity: 0.80 },
      { domain: "Government Services Communication", similarity: 0.72 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Oversimplification loses medical accuracy", impact: "People follow incorrect health guidance" },
      { severity: "critical", scenario: "Low-literacy population excluded by inaccessible variants", impact: "Most vulnerable population receives no useful information" },
      { severity: "high", scenario: "Cultural adaptation encodes bias or misrepresentation", impact: "Message offensive or misaligned with community values" }
    ],
    tags: ["personalization", "content-generation", "audience-segmentation", "multilingual", "public-health"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "20",
    name: "Data Privacy Guardian",
    slug: "data-privacy-guardian",
    version: "2.0.0",
    pattern: "compliance-and-constraint-checking",
    patternLabel: "Compliance",
    description: "Maps data flows, enforces consent-based access control, monitors data access, minimizes collection to necessary data, and detects breaches or policy violations across tech and humanitarian contexts.",
    origin: "TechCorp",
    fork: "Humanitarian Data Protection",
    originDetail: "GDPR/CCPA compliance for consumer tech platform — managing consent, restricting data access, and enabling data subject rights.",
    forkDetail: "Forked for humanitarian beneficiary data protection with witnessed consent, threat-aware classification, ICRC standards, and hostile actor breach detection.",
    adaptationPoints: [
      { name: "regulatory_framework", type: "swappable_component", desc: "GDPR/CCPA compliance or ICRC humanitarian data protection" },
      { name: "consent_model", type: "swappable_component", desc: "Click-through consent or humanitarian witnessed consent" },
      { name: "data_classification", type: "configurable", desc: "Sensitivity categories and threat-aware dynamic reclassification" },
      { name: "breach_detection", type: "configurable", desc: "Anomaly signals and alert escalation protocols" }
    ],
    analogousDomains: [
      { domain: "GDPR Compliance", similarity: 0.90 },
      { domain: "Humanitarian Data Protection", similarity: 0.80 },
      { domain: "HIPAA Patient Data", similarity: 0.85 },
      { domain: "Children Online Privacy (COPPA)", similarity: 0.78 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Breach undetected; beneficiary data exposed to hostile actors", impact: "Vulnerable populations targeted for persecution or violence" },
      { severity: "high", scenario: "Consent formally valid but actually coerced", impact: "Data collected unethically despite passing compliance checks" },
      { severity: "high", scenario: "Data classification outdated; threat changes but classification doesn't", impact: "Previously safe data becomes dangerous to expose" }
    ],
    tags: ["data-protection", "compliance", "consent", "privacy", "humanitarian", "security"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "21",
    name: "Visual Damage Assessor",
    slug: "visual-damage-assessor",
    version: "2.0.0",
    pattern: "pattern-matching-and-classification",
    patternLabel: "Pattern Matching",
    description: "Analyzes visual imagery (photos, satellite, drone) to detect and classify damage, grades severity level, compares before/after states, fuses multi-source data, and maps geographic damage distribution.",
    origin: "InsuranceInnovations",
    fork: "Post-Disaster Assessment",
    originDetail: "Processing insurance claims for vehicle and property damage — photos submitted by policyholders classified by severity for payout.",
    forkDetail: "Forked for post-disaster damage assessment with satellite/drone/field imagery fusion, humanitarian need grades, and geographic damage mapping.",
    adaptationPoints: [
      { name: "image_classifier", type: "swappable_component", desc: "Insurance vehicle/property classifier or xBD building damage classifier" },
      { name: "damage_scale", type: "configurable", desc: "Grade definitions and secondary indicators for humanitarian context" },
      { name: "data_source", type: "swappable_component", desc: "Customer smartphone photos or multimodal satellite/drone/field fusion" },
      { name: "change_detection", type: "configurable", desc: "Temporal resolution and image registration method" }
    ],
    analogousDomains: [
      { domain: "Insurance Photo Assessment", similarity: 0.88 },
      { domain: "Post-Disaster Satellite Assessment", similarity: 0.80 },
      { domain: "Agricultural Crop Damage", similarity: 0.77 },
      { domain: "Infrastructure Inspection", similarity: 0.82 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Automated classification determines which communities get aid first", impact: "Underestimated damage means delayed life-saving aid" },
      { severity: "critical", scenario: "Systematic bias in training data misclassifies certain building types", impact: "Aid systematically misdirected; wealthy vs poor neighborhoods treated unequally" },
      { severity: "high", scenario: "Cloud cover or poor resolution make assessment unreliable", impact: "Assessment appears confident but is actually guessing" }
    ],
    tags: ["damage-assessment", "image-classification", "post-disaster", "satellite-imagery", "humanitarian"],
    frameworks: ["CrewAI", "LangGraph"]
  },
  {
    id: "22",
    name: "Document Intelligence Extractor",
    slug: "document-intelligence-extractor",
    version: "1.0.0",
    pattern: "pattern-matching-and-classification",
    patternLabel: "Pattern Matching",
    description: "Ingests images or PDFs of documents, classifies document type, extracts structured data fields, validates against rules and reference databases, and returns machine-readable records with confidence scores.",
    origin: "Enterprise Systems",
    fork: "Refugee Document Processing",
    originDetail: "Digitizing invoices and receipts for expense processing and accounts payable automation.",
    forkDetail: "Forked for refugee document processing with multi-format classification, handwriting recognition, multilingual OCR, and incomplete reference database handling.",
    adaptationPoints: [
      { name: "document_models", type: "swappable_component", desc: "Invoice/receipt templates or 200+ ID format library" },
      { name: "extraction_rules", type: "configurable", desc: "Field definitions, formats, and mandatory vs optional requirements" },
      { name: "validation_engine", type: "swappable_component", desc: "Accounting validation or identity verification" },
      { name: "ocr_pipeline", type: "configurable", desc: "Text recognition model, preprocessing, and language handling" }
    ],
    analogousDomains: [
      { domain: "Invoice Processing", similarity: 0.90 },
      { domain: "Humanitarian Document Processing", similarity: 0.75 },
      { domain: "Medical Records Digitization", similarity: 0.80 },
      { domain: "Legal Document Review", similarity: 0.82 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Misclassified document type leads to wrong extraction schema", impact: "Critical fields missed or misinterpreted; record is useless" },
      { severity: "critical", scenario: "OCR errors in critical fields (ID number, name, DOB)", impact: "Person cannot be identified; records don't match" },
      { severity: "high", scenario: "Handwriting misrecognized, producing plausible but wrong data", impact: "Silent corruption: extracted data looks valid but is incorrect" }
    ],
    tags: ["document-processing", "ocr", "field-extraction", "pattern-matching", "classification"],
    frameworks: ["LangChain", "Hugging Face", "Tesseract"]
  },
  {
    id: "23",
    name: "Infrastructure Capacity Planner",
    slug: "infrastructure-capacity-planner",
    version: "1.0.0",
    pattern: "constrained-resource-allocation",
    patternLabel: "Resource Allocation",
    description: "Predicts future demand, monitors current capacity utilization, identifies bottlenecks and threshold breaches, and recommends scaling decisions to balance coverage, cost, and human welfare.",
    origin: "Cloud Platform",
    fork: "Refugee Camp Planning",
    originDetail: "Auto-scaling compute and storage resources for cloud platform based on API traffic forecasts and cost optimization.",
    forkDetail: "Forked for refugee camp infrastructure planning with population-driven demand models, physical resource units, logistics lead times, and Sphere Standards.",
    adaptationPoints: [
      { name: "demand_predictor", type: "swappable_component", desc: "API traffic forecaster or population influx model" },
      { name: "capacity_model", type: "configurable", desc: "Unit definitions, allocation standards, and utilization thresholds" },
      { name: "scaling_mechanism", type: "swappable_component", desc: "Cloud API provisioning or logistics procurement pipeline" },
      { name: "cost_optimizer", type: "configurable", desc: "Cost model, optimization objective, and priority hierarchy" }
    ],
    analogousDomains: [
      { domain: "Cloud Auto-Scaling", similarity: 0.88 },
      { domain: "Refugee Camp Infrastructure", similarity: 0.74 },
      { domain: "Hospital Capacity Management", similarity: 0.80 },
      { domain: "Urban Infrastructure Planning", similarity: 0.76 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Underestimate demand; capacity exhausted before scaling completes", impact: "People without water/sanitation/shelter during procurement delay" },
      { severity: "high", scenario: "Over-provision capacity; waste limited funds", impact: "Other populations served by same budget get less aid" },
      { severity: "high", scenario: "Plan for average consumption; peak demand causes failure", impact: "Inadequate water/sanitation during disease outbreaks or extreme weather" }
    ],
    tags: ["capacity-planning", "resource-allocation", "forecasting", "infrastructure", "optimization"],
    frameworks: ["LangGraph", "OR-Tools", "Apache Airflow"]
  },
  {
    id: "24",
    name: "Sentiment & Feedback Analyzer",
    slug: "sentiment-and-feedback-analyzer",
    version: "1.0.0",
    pattern: "information-synthesis-and-routing",
    patternLabel: "Info Synthesis",
    description: "Aggregates feedback from multiple sources, classifies sentiment and themes, identifies emerging issues, prioritizes responses, and feeds community feedback back to decision-makers.",
    origin: "Brand Analytics",
    fork: "Humanitarian Community Feedback",
    originDetail: "Aggregating product reviews from multiple platforms to understand customer sentiment and identify product quality issues.",
    forkDetail: "Forked for community feedback analysis in humanitarian programs with multi-channel sources, humanitarian sentiment model, and feedback-to-action tracking.",
    adaptationPoints: [
      { name: "sentiment_model", type: "swappable_component", desc: "Product/brand sentiment or humanitarian community sentiment classifier" },
      { name: "source_aggregator", type: "swappable_component", desc: "Social media aggregator or humanitarian feedback aggregator" },
      { name: "theme_taxonomy", type: "configurable", desc: "Top-level categories, sentiment mapping, and demographic stratification" },
      { name: "accountability_framework", type: "configurable", desc: "Feedback-to-action loop, response timelines, and community communication" }
    ],
    analogousDomains: [
      { domain: "Brand Sentiment Analysis", similarity: 0.90 },
      { domain: "Humanitarian Community Feedback", similarity: 0.76 },
      { domain: "Political Opinion Monitoring", similarity: 0.72 },
      { domain: "Employee Engagement Analysis", similarity: 0.80 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Negative sentiment detected but no action taken", impact: "Community stops providing feedback; trust eroded" },
      { severity: "high", scenario: "Feedback from marginalized groups not collected", impact: "Concerns of most vulnerable remain invisible" },
      { severity: "critical", scenario: "Feedback system becomes surveillance tool", impact: "Community fears retaliation for negative feedback" }
    ],
    tags: ["sentiment-analysis", "feedback-aggregation", "community-engagement", "accountability", "nlp"],
    frameworks: ["Hugging Face", "spaCy", "Twilio"]
  },
  {
    id: "25",
    name: "Crisis Simulation & Scenario Planner",
    slug: "crisis-simulation-planner",
    version: "1.0.0",
    pattern: "sequential-decision-under-uncertainty",
    patternLabel: "Sequential Decisions",
    description: "Generates plausible crisis scenarios with probability estimates, simulates cascading impacts, estimates resource requirements and timelines, and produces contingency plans for organizational preparedness.",
    origin: "Financial Services",
    fork: "Humanitarian Contingency Planning",
    originDetail: "Stress testing investment portfolios and estimating capital requirements under financial crisis scenarios using Monte Carlo simulation.",
    forkDetail: "Forked for humanitarian crisis scenario planning with population impact modeling, humanitarian supply calculations, and Sphere Standards integration.",
    adaptationPoints: [
      { name: "scenario_generator", type: "swappable_component", desc: "Financial shock scenarios or humanitarian crisis scenarios (disaster, conflict, disease)" },
      { name: "impact_model", type: "swappable_component", desc: "Portfolio VaR or displacement/disease/infrastructure damage impact models" },
      { name: "resource_calculator", type: "swappable_component", desc: "Capital requirement calculator or humanitarian supply calculator" },
      { name: "decision_model", type: "configurable", desc: "Decision points, option values, and authority chains" }
    ],
    analogousDomains: [
      { domain: "Financial Stress Testing", similarity: 0.85 },
      { domain: "Humanitarian Contingency Planning", similarity: 0.78 },
      { domain: "Military Wargaming", similarity: 0.75 },
      { domain: "Pandemic Preparedness Modeling", similarity: 0.80 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Scenario planning info leaked to combatants", impact: "Prediction becomes weapon; neutrality compromised" },
      { severity: "high", scenario: "Worst-case overestimated; resources wasted on unlikely scenarios", impact: "Under-preparation for likely scenarios" },
      { severity: "high", scenario: "Crisis trajectory differs from all scenarios", impact: "Contingency plans don't match reality; poor improvisation" }
    ],
    tags: ["scenario-planning", "risk-modeling", "contingency-planning", "crisis-simulation", "preparedness"],
    frameworks: ["SimPy", "NumPy/SciPy", "MESA", "Plotly"]
  },
  {
    id: "26",
    name: "Fraud Detection & Prevention Engine",
    slug: "fraud-detection-prevention-engine",
    version: "1.0.0",
    pattern: "anomaly-classification-response",
    patternLabel: "Anomaly Detection",
    description: "Identifies adversarial patterns in transactional data — account takeover, identity spoofing, synthetic fraud — by combining behavioral baselines with real-time signal analysis and adaptive thresholds.",
    origin: "Financial Services",
    fork: "Insurance Claims Fraud",
    originDetail: "Detecting fraudulent credit card transactions and account takeover attempts in real-time banking systems",
    forkDetail: "Identifying staged accidents, inflated claims, and provider collusion in insurance claim submissions",
    adaptationPoints: [
      { name: "risk_scorer", type: "swappable_component", desc: "Swap transaction velocity model for claims pattern analyzer with provider network graph analysis" },
      { name: "identity_verifier", type: "swappable_component", desc: "Replace KYC document checker with claimant history cross-referencer and witness consistency analyzer" },
      { name: "threshold_tuner", type: "configurable", desc: "Adjust false-positive tolerance (finance: 1-2%, insurance: 5-8%) and escalation sensitivity per fraud category" },
      { name: "alert_dispatcher", type: "swappable_component", desc: "Swap real-time block/allow for SIU case queue with evidence packaging and regulatory filing" }
    ],
    analogousDomains: [
      { domain: "Insurance Claims Fraud", similarity: 0.80 },
      { domain: "Academic Integrity Monitoring", similarity: 0.68 },
      { domain: "Benefits & Welfare Fraud", similarity: 0.75 }
    ],
    failureModes: [
      { severity: "critical", scenario: "False positive blocks legitimate high-value transaction", impact: "Customer churn, reputational damage, potential legal liability" },
      { severity: "high", scenario: "Adversary reverse-engineers detection thresholds", impact: "Fraud bypasses all automated controls" },
      { severity: "high", scenario: "Model drift as fraud patterns evolve", impact: "Declining catch rate, increasing losses over time" }
    ],
    tags: ["fraud", "security", "anomaly-detection", "risk-scoring", "adversarial"],
    frameworks: ["LangGraph", "CrewAI", "AutoGen"]
  },
  {
    id: "27",
    name: "Recommendation & Matching Engine",
    slug: "recommendation-matching-engine",
    version: "1.0.0",
    pattern: "similarity-ranking-selection",
    patternLabel: "Matching & Ranking",
    description: "Computes multi-dimensional compatibility scores between entities (people, products, opportunities) using collaborative filtering, content-based features, and contextual signals to surface the best matches.",
    origin: "E-Commerce Product Recommendations",
    fork: "Job-Candidate Matching",
    originDetail: "Recommending products based on purchase history, browsing behavior, and similar customer profiles",
    forkDetail: "Matching job seekers to openings using skills, experience, culture fit, and career trajectory analysis",
    adaptationPoints: [
      { name: "similarity_model", type: "swappable_component", desc: "Swap collaborative filtering for skills-gap analysis with weighted competency scoring and growth potential" },
      { name: "feature_extractor", type: "swappable_component", desc: "Replace purchase/browse signals with resume parsing, assessment scores, and behavioral interview signals" },
      { name: "ranking_weights", type: "configurable", desc: "Adjust dimension weights: skills match (0.3), culture fit (0.2), growth potential (0.2), location (0.15), compensation (0.15)" },
      { name: "feedback_loop", type: "extensible", desc: "Add interview outcome tracking, 90-day retention signal, and hiring manager satisfaction for model retraining" }
    ],
    analogousDomains: [
      { domain: "Job-Candidate Matching", similarity: 0.76 },
      { domain: "Donor-Project Matching", similarity: 0.72 },
      { domain: "Patient-Clinical Trial Matching", similarity: 0.70 }
    ],
    failureModes: [
      { severity: "high", scenario: "Filter bubble — recommendations reinforce narrow preferences", impact: "Reduced discovery, user fatigue, declining engagement" },
      { severity: "critical", scenario: "Bias in training data produces discriminatory matches", impact: "Legal liability, fairness violations, reputational harm" },
      { severity: "medium", scenario: "Cold start — insufficient data for new entities", impact: "Poor initial recommendations, high early churn" }
    ],
    tags: ["recommendation", "matching", "ranking", "collaborative-filtering", "personalization"],
    frameworks: ["LangGraph", "CrewAI", "AutoGen"]
  },
  {
    id: "28",
    name: "Knowledge Base Q&A Agent",
    slug: "knowledge-base-qa-agent",
    version: "1.0.0",
    pattern: "retrieval-augmented-generation",
    patternLabel: "RAG & Search",
    description: "Retrieves relevant passages from organizational knowledge bases using semantic search, then generates accurate, cited answers with confidence scores and source attribution for verifiability.",
    origin: "Enterprise IT Helpdesk",
    fork: "Legal Case Research",
    originDetail: "Answering employee IT questions using internal wikis, runbooks, and ticket history with auto-escalation",
    forkDetail: "Searching legal precedents, statutes, and case law to answer attorney queries with citation-ready references",
    adaptationPoints: [
      { name: "retriever", type: "swappable_component", desc: "Swap wiki/Confluence connector for legal database connector (Westlaw, LexisNexis) with citation-aware chunking" },
      { name: "answer_generator", type: "swappable_component", desc: "Replace conversational IT tone with formal legal analysis structure (IRAC: Issue, Rule, Application, Conclusion)" },
      { name: "confidence_threshold", type: "configurable", desc: "IT: 0.7 confidence ok; Legal: 0.9+ required with mandatory 'not legal advice' disclaimers below threshold" },
      { name: "source_ranker", type: "extensible", desc: "Add jurisdiction filtering, recency weighting, and court hierarchy prioritization for legal sources" }
    ],
    analogousDomains: [
      { domain: "Legal Case Research", similarity: 0.74 },
      { domain: "Medical Protocol Search", similarity: 0.78 },
      { domain: "Regulatory Guidance Lookup", similarity: 0.72 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Hallucinated answer presented with high confidence", impact: "User acts on fabricated information; legal/medical risk" },
      { severity: "high", scenario: "Stale knowledge base — answer was correct 6 months ago", impact: "Outdated guidance applied to current situation" },
      { severity: "medium", scenario: "Retrieved passages are relevant but answer synthesis is wrong", impact: "Correct sources, incorrect conclusion — harder to catch" }
    ],
    tags: ["rag", "knowledge-management", "search", "question-answering", "retrieval"],
    frameworks: ["LangGraph", "LlamaIndex", "CrewAI"]
  },
  {
    id: "29",
    name: "Approval Workflow Orchestrator",
    slug: "approval-workflow-orchestrator",
    version: "1.0.0",
    pattern: "sequential-decision-under-uncertainty",
    patternLabel: "Sequential Decisions",
    description: "Manages multi-step, multi-role approval chains with conditional routing, parallel approvals, escalation on timeout, delegation rules, and full audit trail for compliance-sensitive processes.",
    origin: "Corporate Expense Approvals",
    fork: "Clinical Trial Protocol Approval",
    originDetail: "Routing expense reports through manager → finance → VP chains with auto-approval below thresholds",
    forkDetail: "Orchestrating IRB review, sponsor approval, and regulatory submission with 21 CFR Part 11 compliance",
    adaptationPoints: [
      { name: "routing_engine", type: "swappable_component", desc: "Swap org-chart hierarchy routing for regulatory body routing (IRB → sponsor → FDA) with parallel review paths" },
      { name: "approval_rules", type: "configurable", desc: "Adjust thresholds, timeout periods (corporate: 48h, clinical: 30 days), quorum requirements, and veto rules" },
      { name: "compliance_logger", type: "swappable_component", desc: "Replace SOX audit trail with 21 CFR Part 11 electronic signatures and timestamped amendment tracking" },
      { name: "escalation_handler", type: "extensible", desc: "Add regulatory deadline tracking, patient safety escalation, and DSMB emergency review triggers" }
    ],
    analogousDomains: [
      { domain: "Clinical Trial Approval", similarity: 0.73 },
      { domain: "Building Permit Workflow", similarity: 0.71 },
      { domain: "Grant Disbursement Processing", similarity: 0.76 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Approval bypassed due to routing logic error", impact: "Unauthorized action taken; compliance violation; regulatory penalty" },
      { severity: "high", scenario: "Escalation timeout missed — request stuck indefinitely", impact: "Process blockage; missed deadlines; patient enrollment delayed" },
      { severity: "medium", scenario: "Delegation chain creates circular dependency", impact: "Infinite loop; no one can approve; manual intervention required" }
    ],
    tags: ["workflow", "approval", "orchestration", "compliance", "governance"],
    frameworks: ["LangGraph", "CrewAI", "Temporal"]
  },
  {
    id: "30",
    name: "Onboarding & Training Sequencer",
    slug: "onboarding-training-sequencer",
    version: "1.0.0",
    pattern: "adaptive-sequencing",
    patternLabel: "Adaptive Sequencing",
    description: "Designs and delivers personalized learning paths based on role requirements, skill assessments, and real-time progress signals — adapting sequence, pace, and content difficulty dynamically.",
    origin: "Corporate Employee Onboarding",
    fork: "Patient Rehabilitation Planning",
    originDetail: "Sequencing compliance training, tool setup, team introductions, and role-specific skill modules for new hires",
    forkDetail: "Adapting rehabilitation exercise sequences based on recovery progress, pain tolerance, and mobility assessments",
    adaptationPoints: [
      { name: "assessment_engine", type: "swappable_component", desc: "Swap multiple-choice skill quizzes for physical therapy assessments (ROM measurements, pain scales, functional tests)" },
      { name: "content_library", type: "swappable_component", desc: "Replace training modules with exercise protocols, instructional videos, and progressive loading schedules" },
      { name: "pacing_algorithm", type: "configurable", desc: "Corporate: competency gates; Rehab: pain-gated progression with therapist override and plateau detection" },
      { name: "progress_tracker", type: "extensible", desc: "Add clinical outcome measures (FIM scores), insurance milestone reporting, and discharge readiness prediction" }
    ],
    analogousDomains: [
      { domain: "Patient Rehabilitation Planning", similarity: 0.71 },
      { domain: "Refugee Resettlement Guidance", similarity: 0.68 },
      { domain: "Software Adoption Journeys", similarity: 0.74 }
    ],
    failureModes: [
      { severity: "high", scenario: "Assessment misclassifies skill level — wrong starting point", impact: "Boredom (too easy) or overwhelm (too hard); disengagement" },
      { severity: "critical", scenario: "Rehab: progresses patient too fast past pain threshold", impact: "Reinjury; setback in recovery; potential harm" },
      { severity: "medium", scenario: "Content gaps — no module exists for identified skill gap", impact: "Incomplete learning path; false completion signal" }
    ],
    tags: ["onboarding", "training", "adaptive-learning", "sequencing", "personalization"],
    frameworks: ["LangGraph", "CrewAI"]
  },
  {
    id: "31",
    name: "Contract & Legal Clause Analyzer",
    slug: "contract-legal-clause-analyzer",
    version: "1.0.0",
    pattern: "document-structure-extraction",
    patternLabel: "Document Intelligence",
    description: "Extracts obligations, deadlines, risk clauses, and compliance gaps from legal documents using NLP-powered clause identification, cross-reference resolution, and configurable risk taxonomies.",
    origin: "Corporate Contract Review",
    fork: "Donor Agreement Analysis",
    originDetail: "Reviewing vendor contracts for unfavorable terms, auto-renewal traps, liability exposure, and SLA gaps",
    forkDetail: "Parsing humanitarian donor agreements for earmarking restrictions, reporting deadlines, and co-funding obligations",
    adaptationPoints: [
      { name: "clause_classifier", type: "swappable_component", desc: "Swap commercial clause taxonomy (indemnity, IP, SLA) for donor clause taxonomy (earmarks, conditions, reporting)" },
      { name: "risk_scorer", type: "swappable_component", desc: "Replace financial risk model with compliance risk model (donor audit probability, reputational risk, beneficiary impact)" },
      { name: "deadline_extractor", type: "configurable", desc: "Adjust date parsing for fiscal year formats, humanitarian reporting cycles, and multi-timezone coordination" },
      { name: "output_formatter", type: "swappable_component", desc: "Swap legal memo format for donor compliance matrix with RAG status indicators and action items" }
    ],
    analogousDomains: [
      { domain: "Donor Agreement Analysis", similarity: 0.77 },
      { domain: "Lease Agreement Review", similarity: 0.80 },
      { domain: "Regulatory Filing Analysis", similarity: 0.73 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Missed obligation clause — deadline passes without action", impact: "Contract breach; financial penalty; relationship damage" },
      { severity: "high", scenario: "Misclassified clause severity — critical risk marked as low", impact: "Unmitigated exposure; surprise liability" },
      { severity: "medium", scenario: "Cross-reference resolution fails in complex multi-party agreements", impact: "Obligations attributed to wrong party; incomplete risk picture" }
    ],
    tags: ["legal", "contract-analysis", "nlp", "compliance", "document-intelligence"],
    frameworks: ["LangGraph", "LlamaIndex", "CrewAI"]
  },
  {
    id: "32",
    name: "Meeting Summarizer & Action Tracker",
    slug: "meeting-summarizer-action-tracker",
    version: "1.0.0",
    pattern: "temporal-signal-extraction",
    patternLabel: "Signal Extraction",
    description: "Processes meeting transcripts to extract key decisions, action items with assignees and deadlines, open questions, and sentiment shifts — then tracks follow-through across subsequent meetings.",
    origin: "Corporate Standups & All-Hands",
    fork: "Humanitarian Coordination Meetings",
    originDetail: "Summarizing daily standups, sprint retrospectives, and quarterly all-hands with Jira/Slack integration",
    forkDetail: "Processing inter-agency coordination meetings (OCHA clusters) with multi-language support and crisis-priority action tracking",
    adaptationPoints: [
      { name: "transcription_source", type: "swappable_component", desc: "Swap Zoom/Teams API for field radio transcription, WhatsApp voice notes, and satellite phone call logs" },
      { name: "action_classifier", type: "swappable_component", desc: "Replace Jira ticket creation with humanitarian action tracking (3W: Who does What Where) and OCHA reporting" },
      { name: "language_handler", type: "swappable_component", desc: "Add multi-language transcript processing with code-switching detection and terminology standardization" },
      { name: "priority_schema", type: "configurable", desc: "Swap sprint priority for humanitarian urgency (life-saving → time-critical → important → routine)" }
    ],
    analogousDomains: [
      { domain: "Humanitarian Coordination Meetings", similarity: 0.74 },
      { domain: "Clinical Case Conferences", similarity: 0.71 },
      { domain: "Legislative Committee Sessions", similarity: 0.69 }
    ],
    failureModes: [
      { severity: "high", scenario: "Action item attributed to wrong person", impact: "Task falls through cracks; no one takes ownership" },
      { severity: "medium", scenario: "Transcription errors in technical terms or proper nouns", impact: "Garbled action items; confusion about specifics" },
      { severity: "critical", scenario: "Sensitive information in summary shared to wrong audience", impact: "Security breach; protection concerns in humanitarian contexts" }
    ],
    tags: ["meetings", "summarization", "action-tracking", "nlp", "collaboration"],
    frameworks: ["LangGraph", "CrewAI", "AutoGen"]
  },
  {
    id: "33",
    name: "Energy & Sustainability Optimizer",
    slug: "energy-sustainability-optimizer",
    version: "1.0.0",
    pattern: "constrained-resource-allocation",
    patternLabel: "Resource Allocation",
    description: "Optimizes energy consumption, carbon emissions, and resource waste across operations by modeling usage patterns, forecasting demand, and recommending operational changes within sustainability targets.",
    origin: "Commercial Building HVAC",
    fork: "Agricultural Water Management",
    originDetail: "Optimizing heating, cooling, and lighting schedules across commercial buildings to minimize energy costs and carbon footprint",
    forkDetail: "Managing irrigation schedules, water allocation, and drought response across agricultural operations with groundwater preservation",
    adaptationPoints: [
      { name: "consumption_model", type: "swappable_component", desc: "Swap HVAC thermal model for crop evapotranspiration model with soil moisture sensors and weather forecast integration" },
      { name: "optimization_objective", type: "configurable", desc: "Adjust weights: cost (0.3), carbon (0.3), comfort/yield (0.25), resilience (0.15) — agriculture adds aquifer sustainability" },
      { name: "sensor_interface", type: "swappable_component", desc: "Replace BMS/IoT building sensors with agricultural sensors (soil moisture, NDVI satellite, flow meters, rain gauges)" },
      { name: "reporting_engine", type: "extensible", desc: "Add ESG reporting, carbon credit calculations, and regulatory compliance (EU Taxonomy, TCFD, water rights)" }
    ],
    analogousDomains: [
      { domain: "Agricultural Water Management", similarity: 0.73 },
      { domain: "Fleet Emissions Planning", similarity: 0.70 },
      { domain: "Manufacturing Waste Reduction", similarity: 0.68 }
    ],
    failureModes: [
      { severity: "high", scenario: "Optimization sacrifices comfort/yield for efficiency targets", impact: "Building occupant complaints; crop failure; economic loss" },
      { severity: "critical", scenario: "Sensor failure provides false low-consumption readings", impact: "Overuse goes undetected; aquifer depletion; equipment damage" },
      { severity: "medium", scenario: "Weather forecast error compounds optimization decisions", impact: "Sub-optimal resource allocation for 24-48h; recovery lag" }
    ],
    tags: ["sustainability", "energy", "optimization", "carbon", "resource-management"],
    frameworks: ["CrewAI", "LangGraph", "NumPy/SciPy"]
  },
  {
    id: "34",
    name: "Multi-Agent Task Delegator",
    slug: "multi-agent-task-delegator",
    version: "1.0.0",
    pattern: "hierarchical-task-decomposition",
    patternLabel: "Orchestration",
    description: "Decomposes complex goals into subtasks, assigns them to specialized agents based on capability matching, manages dependencies and parallel execution, handles failures with retry and fallback strategies.",
    origin: "Software Development Pipeline",
    fork: "Humanitarian Response Coordination",
    originDetail: "Orchestrating code generation, review, testing, and deployment agents in an automated CI/CD pipeline",
    forkDetail: "Coordinating assessment, logistics, medical, shelter, and WASH agents in multi-sector emergency response",
    adaptationPoints: [
      { name: "task_decomposer", type: "swappable_component", desc: "Swap code-task DAG builder for humanitarian response plan decomposer with sector dependencies and access constraints" },
      { name: "agent_registry", type: "swappable_component", desc: "Replace developer tool agents with humanitarian sector agents (health, shelter, WASH, protection, logistics)" },
      { name: "failure_strategy", type: "configurable", desc: "Software: retry 3x then fail; Humanitarian: degrade gracefully, never fully fail, always produce partial result" },
      { name: "priority_resolver", type: "swappable_component", desc: "Swap sprint priority for life-saving priority with resource contention resolution and ethical triage logic" }
    ],
    analogousDomains: [
      { domain: "Humanitarian Response Coordination", similarity: 0.72 },
      { domain: "Manufacturing Assembly Orchestration", similarity: 0.69 },
      { domain: "Research Paper Writing Pipeline", similarity: 0.74 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Circular dependency in task graph — deadlock", impact: "Entire pipeline halts; no output produced; timeout waste" },
      { severity: "high", scenario: "Agent capability mismatch — task assigned to wrong specialist", impact: "Low-quality output cascades to dependent tasks" },
      { severity: "high", scenario: "Parallel execution race condition corrupts shared state", impact: "Inconsistent results; non-deterministic failures" }
    ],
    tags: ["orchestration", "multi-agent", "task-decomposition", "delegation", "pipeline"],
    frameworks: ["LangGraph", "CrewAI", "AutoGen", "Temporal"]
  },
  {
    id: "35",
    name: "Predictive Maintenance Scheduler",
    slug: "predictive-maintenance-scheduler",
    version: "1.0.0",
    pattern: "temporal-prediction-scheduling",
    patternLabel: "Predictive Analytics",
    description: "Predicts when equipment or infrastructure will fail using sensor data, usage patterns, and degradation models — then optimally schedules maintenance windows to minimize downtime and cost.",
    origin: "Manufacturing Equipment",
    fork: "Medical Device Maintenance",
    originDetail: "Predicting CNC machine, conveyor, and robotic arm failures using vibration, temperature, and cycle count data",
    forkDetail: "Scheduling maintenance for MRI machines, ventilators, and infusion pumps with patient-safety-first prioritization",
    adaptationPoints: [
      { name: "degradation_model", type: "swappable_component", desc: "Swap mechanical wear curves for medical device calibration drift models with regulatory compliance windows (FDA/IEC)" },
      { name: "sensor_pipeline", type: "swappable_component", desc: "Replace industrial IoT (vibration, thermal) with medical device telemetry (error logs, calibration drift, usage hours)" },
      { name: "scheduling_optimizer", type: "configurable", desc: "Manufacturing: minimize production downtime; Medical: patient safety first, then minimize procedure cancellations" },
      { name: "compliance_tracker", type: "extensible", desc: "Add FDA 21 CFR 820 maintenance records, Joint Commission readiness, and manufacturer service agreement tracking" }
    ],
    analogousDomains: [
      { domain: "Medical Device Maintenance", similarity: 0.76 },
      { domain: "Bridge & Infrastructure Inspection", similarity: 0.72 },
      { domain: "Fleet Vehicle Servicing", similarity: 0.78 }
    ],
    failureModes: [
      { severity: "critical", scenario: "Predicted 30 days remaining but fails in 2 days", impact: "Unplanned downtime; production halt; patient safety risk in medical" },
      { severity: "high", scenario: "Over-maintenance — too many false predictions of imminent failure", impact: "Unnecessary downtime; wasted parts and labor; reduced trust in system" },
      { severity: "medium", scenario: "Sensor data gap — missing telemetry during critical period", impact: "Model operates blind; predictions revert to time-based fallback" }
    ],
    tags: ["predictive-maintenance", "scheduling", "iot", "degradation-modeling", "reliability"],
    frameworks: ["CrewAI", "LangGraph", "NumPy/SciPy", "TensorFlow"]
  }
];

// ===== NAV SCROLL EFFECT =====
window.addEventListener('scroll', function() {
  var nav = document.getElementById('main-nav');
  if (window.scrollY > 50) nav.classList.add('scrolled');
  else nav.classList.remove('scrolled');

  var btt = document.getElementById('back-to-top');
  if (btt) {
    if (window.scrollY > 400) btt.classList.add('show');
    else btt.classList.remove('show');
  }
});

document.addEventListener('click', function(e) {
  if (e.target.closest('#back-to-top')) {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
});

// ===== RENDER CARDS =====
const grid = document.getElementById('cards-grid');
const noResults = document.getElementById('no-results');
const searchInput = document.getElementById('search');
const filtersEl = document.getElementById('filters');
let activeFilter = 'all';

function getCardSlug(name) {
  return name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '');
}

function renderCards(filtered) {
  grid.innerHTML = '';
  if (filtered.length === 0) {
    noResults.style.display = 'block';
    return;
  }
  noResults.style.display = 'none';

  filtered.forEach((card, index) => {
    const el = document.createElement('div');
    el.className = 'card';
    el.style.animationDelay = (index * 0.04) + 's';
    el.onclick = () => openModal(card);
    el.innerHTML = `
      <div class="card-header">
        <span class="card-number">ABC-${esc(card.id)}</span>
        <span class="card-version">v${esc(card.version)}</span>
      </div>
      ${(() => {
        const slug = card.slug;
        const comp = complianceScores[slug];
        if (!comp) return '';
        const badgeClass = comp.level === 'Certified' ? 'badge-certified' : 'badge-compatible';
        return '<div class="compliance-badge ' + badgeClass + '">ABC ' + comp.level + ' — ' + comp.overall + '</div>';
      })()}
      <div class="card-title">${esc(card.name)}</div>
      <div class="card-pattern ${esc(card.pattern)}">${esc(card.patternLabel)}</div>
      <div class="card-description">${esc(card.description)}</div>
      <div class="card-fork">
        <span>${esc(card.origin)}</span>
        <span class="card-fork-arrow">→</span>
        <span style="color: var(--cyan-dim)">${esc(card.fork)}</span>
      </div>
      <div class="card-meta">
        <span class="card-meta-item">${card.adaptationPoints.length} adaptation points</span>
        <span class="card-meta-item">${card.analogousDomains.length} domains</span>
        <span class="card-meta-item">${esc(card.frameworks.join(', '))}</span>
      </div>
    `;
    grid.appendChild(el);
  });
  document.getElementById('cards-shown').textContent = filtered.length;
  document.getElementById('cards-total').textContent = cards.length;
}

function filterCards() {
  const query = searchInput.value.toLowerCase();
  let filtered = cards;

  if (activeFilter !== 'all') {
    filtered = filtered.filter(c => c.pattern === activeFilter);
  }

  if (query) {
    filtered = filtered.filter(c =>
      c.name.toLowerCase().includes(query) ||
      c.description.toLowerCase().includes(query) ||
      c.origin.toLowerCase().includes(query) ||
      c.fork.toLowerCase().includes(query) ||
      c.tags.some(t => t.includes(query)) ||
      c.pattern.replace(/-/g, ' ').includes(query) ||
      c.analogousDomains.some(d => d.domain.toLowerCase().includes(query))
    );
  }

  renderCards(filtered);
}

searchInput.addEventListener('input', filterCards);

filtersEl.addEventListener('click', (e) => {
  if (!e.target.classList.contains('filter-btn')) return;
  filtersEl.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  e.target.classList.add('active');
  activeFilter = e.target.dataset.filter;
  filterCards();
});

// ===== MODAL =====
const overlay = document.getElementById('modal-overlay');
const modalContent = document.getElementById('modal-content');

function generateYAML(card) {
  const yaml = `abc_version: "0.1.0"

identity:
  name: "${card.slug}"
  display_name: "${card.name}"
  version: "${card.version}"
  authors:
    - name: "Your Name"
      org: "Your Organization"
  license: "Apache-2.0"
  tags: [${card.tags.map(t => `"${t}"`).join(', ')}]

problem_pattern:
  category: "${card.pattern}"
  description: >
    ${card.description}

  analogous_domains:
${card.analogousDomains.map(d => `    - domain: "${d.domain}"
      similarity: ${d.similarity}`).join('\n')}

adaptation_points:
${card.adaptationPoints.map((ap, i) => `  - id: "AP-${String(i+1).padStart(3,'0')}"
    name: "${ap.name}"
    type: "${ap.type}"
    description: >
      ${ap.desc}`).join('\n\n')}

trust:
  failure_modes:
${card.failureModes.map((fm, i) => `    - id: "FM-${String(i+1).padStart(3,'0')}"
      scenario: "${fm.scenario}"
      impact: "${fm.impact}"
      severity: "${fm.severity}"`).join('\n\n')}

provenance:
  origin:
    domain: "${card.origin.toLowerCase().replace(/ /g, '-')}"
    original_use_case: "${card.originDetail}"

  lineage:
    - version: "${card.version}"
      domain: "${card.fork.toLowerCase().replace(/ /g, '-')}"
      notes: "Forked: ${card.originDetail} → ${card.forkDetail}"

  compatibility:
    frameworks:
${card.frameworks.map(f => `      - name: "${f}"`).join('\n')}
`;
  return yaml;
}

function copyYAML() {
  if (!currentModalCard) return;
  const yaml = generateYAML(currentModalCard);
  navigator.clipboard.writeText(yaml).then(function() {
    var fb = document.getElementById('copy-feedback');
    if (fb) { fb.classList.add('show'); setTimeout(function() { fb.classList.remove('show'); }, 2000); }
  });
}

function downloadYAML() {
  if (!currentModalCard) return;
  var card = currentModalCard;
  var yaml = generateYAML(card);
  var blob = new Blob([yaml], { type: 'text/yaml' });
  var url = URL.createObjectURL(blob);
  var a = document.createElement('a');
  a.href = url;
  a.download = card.slug + '.yaml';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

// Store current card for button handlers
let currentModalCard = null;

function openModal(card) {
  currentModalCard = card;

  let html = '';
  html += '<button class="modal-close" onclick="closeModal()">&#10005;</button>';
  html += '<h2>' + esc(card.name) + '</h2>';
  html += '<div class="modal-subtitle">ABC-' + esc(card.id) + ' &middot; v' + esc(card.version) + ' &middot; ' + esc(card.pattern) + '</div>';

  // Action buttons
  html += '<div class="modal-actions">';
  html += '<button class="action-btn primary" onclick="copyYAML()">';
  html += '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>';
  html += 'Copy YAML <span class="copy-feedback" id="copy-feedback">Copied!</span></button>';
  html += '<button class="action-btn secondary" onclick="downloadYAML()">';
  html += '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>';
  html += 'Download .yaml</button>';
  html += '</div>';

  // Fork story
  html += '<div class="modal-fork-story">';
  html += '<div class="modal-fork-label">Fork Story</div>';
  html += '<div class="modal-fork-flow">';
  html += '<span class="origin">' + esc(card.originDetail) + '</span>';
  html += '<span class="arrow">&rarr;</span>';
  html += '<span class="target">' + esc(card.forkDetail) + '</span>';
  html += '</div></div>';

  // Description
  html += '<div class="modal-section"><h3>Description</h3>';
  html += '<p>' + esc(card.description) + '</p></div>';

  // Adaptation Points
  html += '<div class="modal-section"><h3>Adaptation Points</h3><ul class="adaptation-list">';
  card.adaptationPoints.forEach(function(ap) {
    html += '<li class="adaptation-item">';
    html += '<div class="adaptation-item-header">';
    html += '<span class="adaptation-name">' + esc(ap.name) + '</span>';
    html += '<span class="adaptation-type">' + esc(ap.type) + '</span>';
    html += '</div>';
    html += '<div class="adaptation-desc">' + esc(ap.desc) + '</div>';
    html += '</li>';
  });
  html += '</ul></div>';

  // Analogous Domains
  html += '<div class="modal-section"><h3>Analogous Domains</h3><div class="domain-tag-list">';
  card.analogousDomains.forEach(function(d) {
    html += '<div class="domain-tag">' + esc(d.domain);
    html += ' <span class="domain-similarity">' + (d.similarity * 100).toFixed(0) + '%</span></div>';
  });
  html += '</div></div>';

  // Failure Modes
  html += '<div class="modal-section"><h3>Failure Modes</h3><ul class="failure-list">';
  card.failureModes.forEach(function(fm) {
    html += '<li class="failure-item">';
    html += '<span class="failure-severity ' + esc(fm.severity) + '">' + esc(fm.severity.replace(/_/g, ' ')) + '</span>';
    html += '<div class="failure-scenario">' + esc(fm.scenario) + '</div>';
    html += '<div class="failure-impact">' + esc(fm.impact) + '</div>';
    html += '</li>';
  });
  html += '</ul></div>';

  // Frameworks
  html += '<div class="modal-section"><h3>Compatible Frameworks</h3><div class="domain-tag-list">';
  card.frameworks.forEach(function(f) {
    html += '<div class="domain-tag">' + esc(f) + '</div>';
  });
  html += '</div></div>';

  // Similar Behaviors
  var slug = card.slug;
  var similar = similarityMap[slug];
  if (similar && similar.length > 0) {
    html += '<div class="modal-section"><h3>Similar Behaviors</h3>';
    html += '<div class="similar-cards-list">';
    similar.forEach(function(simSlug) {
      var simCard = cards.find(function(c) { return c.slug === simSlug; });
      if (simCard) {
        var simComp = complianceScores[simSlug];
        html += '<div class="similar-card-item" onclick="closeModal(); setTimeout(function(){ openModal(cards.find(function(c){return c.slug===\'' + esc(simSlug) + '\';})); }, 300);">';
        html += '<span class="similar-card-name">' + esc(simCard.name) + '</span>';
        if (simComp) html += '<span class="similar-card-badge ' + (simComp.level === 'Certified' ? 'badge-certified' : 'badge-compatible') + '">' + simComp.level + '</span>';
        html += '</div>';
      }
    });
    html += '</div></div>';
  }

  modalContent.innerHTML = html;
  overlay.classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  overlay.classList.remove('active');
  document.body.style.overflow = '';
}

overlay.addEventListener('click', (e) => {
  if (e.target === overlay) closeModal();
});

document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') closeModal();
});

// ===== INITIAL RENDER =====
// ===== COMPLIANCE & SIMILARITY DATA =====
const complianceScores = {
  "inventory-rebalance-optimizer": { overall: 93.2, level: "Certified" },
  "workforce-shift-scheduler": { overall: 89.9, level: "Compatible" },
  "budget-envelope-allocator": { overall: 89.9, level: "Compatible" },
  "fleet-route-optimizer": { overall: 88.8, level: "Compatible" },
  "pattern-anomaly-detector": { overall: 89.9, level: "Compatible" },
  "equipment-health-monitor": { overall: 89.9, level: "Compatible" },
  "supply-chain-disruption-detector": { overall: 89.9, level: "Compatible" },
  "comms-triage-router": { overall: 89.9, level: "Compatible" },
  "regulatory-compliance-checker": { overall: 89.9, level: "Compatible" },
  "daily-intelligence-briefer": { overall: 89.9, level: "Compatible" },
  "multi-party-negotiator": { overall: 92.1, level: "Certified" },
  "patient-risk-stratifier": { overall: 92.1, level: "Certified" },
  "environmental-impact-monitor": { overall: 92.1, level: "Certified" },
  "safety-incident-predictor": { overall: 93.2, level: "Certified" },
  "project-risk-cascade-planner": { overall: 88.8, level: "Compatible" },
  "customer-journey-orchestrator": { overall: 89.9, level: "Compatible" },
  "dynamic-pricing-engine": { overall: 89.9, level: "Compatible" },
  "travel-disruption-manager": { overall: 88.8, level: "Compatible" },
  "adaptive-content-personalizer": { overall: 91.0, level: "Certified" },
  "data-privacy-guardian": { overall: 91.0, level: "Certified" },
  "visual-damage-assessor": { overall: 92.1, level: "Certified" },
  "document-intelligence-extractor": { overall: 91.0, level: "Certified" },
  "infrastructure-capacity-planner": { overall: 86.4, level: "Compatible" },
  "sentiment-and-feedback-analyzer": { overall: 88.8, level: "Compatible" },
  "crisis-simulation-planner": { overall: 88.7, level: "Compatible" },
  "fraud-detection-prevention-engine": { overall: 91.5, level: "Certified" },
  "recommendation-matching-engine": { overall: 88.3, level: "Compatible" },
  "knowledge-base-qa-agent": { overall: 90.2, level: "Certified" },
  "approval-workflow-orchestrator": { overall: 89.1, level: "Compatible" },
  "onboarding-training-sequencer": { overall: 87.6, level: "Compatible" },
  "contract-legal-clause-analyzer": { overall: 90.8, level: "Certified" },
  "meeting-summarizer-action-tracker": { overall: 88.9, level: "Compatible" },
  "energy-sustainability-optimizer": { overall: 91.3, level: "Certified" },
  "multi-agent-task-delegator": { overall: 92.5, level: "Certified" },
  "predictive-maintenance-scheduler": { overall: 90.0, level: "Certified" }
};

const similarityMap = {
  "inventory-rebalance-optimizer": ["workforce-shift-scheduler","budget-envelope-allocator","fleet-route-optimizer"],
  "workforce-shift-scheduler": ["inventory-rebalance-optimizer","travel-disruption-manager","fleet-route-optimizer"],
  "budget-envelope-allocator": ["inventory-rebalance-optimizer","workforce-shift-scheduler","daily-intelligence-briefer"],
  "fleet-route-optimizer": ["workforce-shift-scheduler","inventory-rebalance-optimizer","budget-envelope-allocator"],
  "pattern-anomaly-detector": ["fraud-detection-prevention-engine","environmental-impact-monitor","supply-chain-disruption-detector"],
  "equipment-health-monitor": ["predictive-maintenance-scheduler","supply-chain-disruption-detector","pattern-anomaly-detector"],
  "supply-chain-disruption-detector": ["equipment-health-monitor","pattern-anomaly-detector","patient-risk-stratifier"],
  "comms-triage-router": ["daily-intelligence-briefer","sentiment-and-feedback-analyzer","travel-disruption-manager"],
  "regulatory-compliance-checker": ["equipment-health-monitor","daily-intelligence-briefer","patient-risk-stratifier"],
  "daily-intelligence-briefer": ["comms-triage-router","sentiment-and-feedback-analyzer","patient-risk-stratifier"],
  "multi-party-negotiator": ["workforce-shift-scheduler","travel-disruption-manager","daily-intelligence-briefer"],
  "patient-risk-stratifier": ["daily-intelligence-briefer","regulatory-compliance-checker","safety-incident-predictor"],
  "environmental-impact-monitor": ["pattern-anomaly-detector","safety-incident-predictor","equipment-health-monitor"],
  "safety-incident-predictor": ["environmental-impact-monitor","project-risk-cascade-planner","customer-journey-orchestrator"],
  "project-risk-cascade-planner": ["safety-incident-predictor","crisis-simulation-planner","daily-intelligence-briefer"],
  "customer-journey-orchestrator": ["safety-incident-predictor","daily-intelligence-briefer","dynamic-pricing-engine"],
  "dynamic-pricing-engine": ["infrastructure-capacity-planner","customer-journey-orchestrator","travel-disruption-manager"],
  "travel-disruption-manager": ["workforce-shift-scheduler","daily-intelligence-briefer","multi-party-negotiator"],
  "adaptive-content-personalizer": ["recommendation-matching-engine","onboarding-training-sequencer","comms-triage-router"],
  "data-privacy-guardian": ["regulatory-compliance-checker","visual-damage-assessor","infrastructure-capacity-planner"],
  "visual-damage-assessor": ["daily-intelligence-briefer","data-privacy-guardian","patient-risk-stratifier"],
  "document-intelligence-extractor": ["contract-legal-clause-analyzer","meeting-summarizer-action-tracker","comms-triage-router"],
  "infrastructure-capacity-planner": ["crisis-simulation-planner","environmental-impact-monitor","inventory-rebalance-optimizer"],
  "sentiment-and-feedback-analyzer": ["comms-triage-router","daily-intelligence-briefer","environmental-impact-monitor"],
  "crisis-simulation-planner": ["infrastructure-capacity-planner","project-risk-cascade-planner","travel-disruption-manager"],
  "fraud-detection-prevention-engine": ["pattern-anomaly-detector","data-privacy-guardian","regulatory-compliance-checker"],
  "recommendation-matching-engine": ["adaptive-content-personalizer","customer-journey-orchestrator","sentiment-and-feedback-analyzer"],
  "knowledge-base-qa-agent": ["document-intelligence-extractor","adaptive-content-personalizer","regulatory-compliance-checker"],
  "approval-workflow-orchestrator": ["multi-agent-task-delegator","regulatory-compliance-checker","project-risk-cascade-planner"],
  "onboarding-training-sequencer": ["adaptive-content-personalizer","recommendation-matching-engine","customer-journey-orchestrator"],
  "contract-legal-clause-analyzer": ["document-intelligence-extractor","regulatory-compliance-checker","data-privacy-guardian"],
  "meeting-summarizer-action-tracker": ["document-intelligence-extractor","sentiment-and-feedback-analyzer","comms-triage-router"],
  "energy-sustainability-optimizer": ["infrastructure-capacity-planner","environmental-impact-monitor","fleet-route-optimizer"],
  "multi-agent-task-delegator": ["approval-workflow-orchestrator","project-risk-cascade-planner","crisis-simulation-planner"],
  "predictive-maintenance-scheduler": ["equipment-health-monitor","safety-incident-predictor","infrastructure-capacity-planner"]
};

// ===== INITIAL RENDER =====
renderCards(cards);

// ===== SUPABASE CONFIG =====
// Publishable key — safe for client-side use, protected by Row Level Security (RLS)
var SUPABASE_URL = 'https://dpdpbijikttsuehznvkb.supabase.co';
var SUPABASE_ANON_KEY = 'sb_publishable_m4t24tSWI4SG4oYDuBtHGw_w-aiTKPZ';
var supabaseClient = null;
try {
  if (typeof supabase !== 'undefined' && SUPABASE_URL.indexOf('YOUR_PROJECT') === -1) {
    supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  }
} catch(e) { console.log('Supabase not configured yet'); }

// ===== SUBMISSION FORM =====
var formStep = 1;
var formTotalSteps = 7;

function openSubmitForm() {
  document.getElementById('form-overlay').classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeSubmitForm() {
  document.getElementById('form-overlay').classList.remove('active');
  document.body.style.overflow = '';
}

function showFormStep(step) {
  document.querySelectorAll('#form-overlay .form-step').forEach(function(el) { el.classList.remove('active'); });
  document.querySelector('#form-overlay .form-step[data-step="' + step + '"]').classList.add('active');
  document.getElementById('progress-fill').style.width = ((step / formTotalSteps) * 100) + '%';
  document.querySelectorAll('#progress-steps .progress-step').forEach(function(el, i) {
    el.classList.remove('active', 'completed');
    if (i + 1 === step) el.classList.add('active');
    else if (i + 1 < step) el.classList.add('completed');
  });
  document.getElementById('btn-prev').style.visibility = step === 1 ? 'hidden' : 'visible';
  var nextBtn = document.getElementById('btn-next');
  if (step === formTotalSteps) { nextBtn.textContent = 'Finish'; }
  else { nextBtn.innerHTML = 'Next &#8594;'; }
  updateFormPreview();
}

function validateCurrentStep() {
  if (formStep === 1) {
    var name = document.getElementById('f-display-name').value.trim();
    if (!name) { alert('Please enter a display name.'); return false; }
    if (name.length > 200) { alert('Display name too long (max 200 characters).'); return false; }
  }
  if (formStep === 2) {
    var desc = document.getElementById('f-description').value.trim();
    if (!desc) { alert('Please enter a description.'); return false; }
    if (desc.length > 5000) { alert('Description too long (max 5000 characters).'); return false; }
  }
  return true;
}

function nextFormStep() {
  if (!validateCurrentStep()) return;
  if (formStep === formTotalSteps) {
    downloadFormYAML();
    return;
  }
  if (formStep < formTotalSteps) { formStep++; showFormStep(formStep); }
}

function prevFormStep() {
  if (formStep > 1) { formStep--; showFormStep(formStep); }
}

// Auto-generate slug from display name
document.getElementById('f-display-name').addEventListener('input', function() {
  document.getElementById('f-slug').value = this.value.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '');
  updateFormPreview();
});

// Update preview on any input change
document.getElementById('form-overlay').addEventListener('input', function() { updateFormPreview(); });

function addInput() {
  var html = '<div class="repeating-item">';
  html += '<button type="button" class="remove-item" onclick="this.parentElement.remove(); updateFormPreview();">&times;</button>';
  html += '<div class="field-group"><label>Name</label><input type="text" class="fi-name" placeholder="Input name"></div>';
  html += '<div class="field-group"><label>Type</label><input type="text" class="fi-type" placeholder="Data type"></div>';
  html += '<div class="field-group"><label>Description</label><input type="text" class="fi-desc" placeholder="Description"></div>';
  html += '</div>';
  document.getElementById('inputs-list').insertAdjacentHTML('beforeend', html);
}

function addOutput() {
  var html = '<div class="repeating-item">';
  html += '<button type="button" class="remove-item" onclick="this.parentElement.remove(); updateFormPreview();">&times;</button>';
  html += '<div class="field-group"><label>Name</label><input type="text" class="fo-name" placeholder="Output name"></div>';
  html += '<div class="field-group"><label>Type</label><input type="text" class="fo-type" placeholder="Data type"></div>';
  html += '<div class="field-group"><label>Description</label><input type="text" class="fo-desc" placeholder="Description"></div>';
  html += '</div>';
  document.getElementById('outputs-list').insertAdjacentHTML('beforeend', html);
}

function addAssumption() {
  var html = '<div class="repeating-item">';
  html += '<button type="button" class="remove-item" onclick="this.parentElement.remove(); updateFormPreview();">&times;</button>';
  html += '<div class="field-group"><label>Type</label><select class="fa-type"><option value="data">Data</option><option value="environment">Environment</option><option value="authority">Authority</option></select></div>';
  html += '<div class="field-group"><label>Assumption</label><input type="text" class="fa-assumption" placeholder="What is assumed?"></div>';
  html += '<div class="field-group"><label>Strength</label><select class="fa-strength"><option value="hard">Hard</option><option value="soft">Soft</option></select></div>';
  html += '</div>';
  document.getElementById('assumptions-list').insertAdjacentHTML('beforeend', html);
}

function addAdaptation() {
  var html = '<div class="repeating-item">';
  html += '<button type="button" class="remove-item" onclick="this.parentElement.remove(); updateFormPreview();">&times;</button>';
  html += '<div class="field-group"><label>Name</label><input type="text" class="fap-name" placeholder="e.g., demand_model"></div>';
  html += '<div class="field-group"><label>Type</label><select class="fap-type"><option value="swappable_component">Swappable Component</option><option value="configurable">Configurable</option><option value="extensible">Extensible</option></select></div>';
  html += '<div class="field-group"><label>Description</label><textarea class="fap-desc" rows="2" placeholder="How it adapts"></textarea></div>';
  html += '</div>';
  document.getElementById('adaptations-list').insertAdjacentHTML('beforeend', html);
}

function addFailure() {
  var html = '<div class="repeating-item">';
  html += '<button type="button" class="remove-item" onclick="this.parentElement.remove(); updateFormPreview();">&times;</button>';
  html += '<div class="field-group"><label>Severity</label><select class="ff-severity"><option value="critical">Critical</option><option value="high">High</option><option value="medium">Medium</option><option value="low">Low</option></select></div>';
  html += '<div class="field-group"><label>Scenario</label><input type="text" class="ff-scenario" placeholder="What fails?"></div>';
  html += '<div class="field-group"><label>Impact</label><input type="text" class="ff-impact" placeholder="What happens?"></div>';
  html += '</div>';
  document.getElementById('failures-list').insertAdjacentHTML('beforeend', html);
}

function collectFormData() {
  var data = {};
  data.slug = document.getElementById('f-slug').value || 'untitled';
  data.displayName = document.getElementById('f-display-name').value || '';
  data.version = document.getElementById('f-version').value || '1.0.0';
  data.author = document.getElementById('f-author').value || '';
  data.org = document.getElementById('f-org').value || '';
  data.tags = document.getElementById('f-tags').value || '';
  data.category = document.getElementById('f-category').value || '';
  data.description = document.getElementById('f-description').value || '';
  data.trigger = document.getElementById('f-trigger').value || '';
  data.origin = document.getElementById('f-origin').value || '';
  data.usecase = document.getElementById('f-usecase').value || '';
  data.fork = document.getElementById('f-fork').value || '';
  data.forkNotes = document.getElementById('f-fork-notes').value || '';
  data.frameworks = document.getElementById('f-frameworks').value || '';

  data.inputs = [];
  document.querySelectorAll('#inputs-list .repeating-item').forEach(function(el) {
    var n = el.querySelector('.fi-name'); var t = el.querySelector('.fi-type'); var d = el.querySelector('.fi-desc');
    if (n && n.value) data.inputs.push({ name: n.value, type: t ? t.value : '', desc: d ? d.value : '' });
  });
  data.outputs = [];
  document.querySelectorAll('#outputs-list .repeating-item').forEach(function(el) {
    var n = el.querySelector('.fo-name'); var t = el.querySelector('.fo-type'); var d = el.querySelector('.fo-desc');
    if (n && n.value) data.outputs.push({ name: n.value, type: t ? t.value : '', desc: d ? d.value : '' });
  });
  data.assumptions = [];
  document.querySelectorAll('#assumptions-list .repeating-item').forEach(function(el) {
    var tp = el.querySelector('.fa-type'); var a = el.querySelector('.fa-assumption'); var s = el.querySelector('.fa-strength');
    if (a && a.value) data.assumptions.push({ type: tp ? tp.value : 'data', assumption: a.value, strength: s ? s.value : 'soft' });
  });
  data.adaptations = [];
  document.querySelectorAll('#adaptations-list .repeating-item').forEach(function(el) {
    var n = el.querySelector('.fap-name'); var t = el.querySelector('.fap-type'); var d = el.querySelector('.fap-desc');
    if (n && n.value) data.adaptations.push({ name: n.value, type: t ? t.value : 'swappable_component', desc: d ? d.value : '' });
  });
  data.failures = [];
  document.querySelectorAll('#failures-list .repeating-item').forEach(function(el) {
    var sv = el.querySelector('.ff-severity'); var sc = el.querySelector('.ff-scenario'); var im = el.querySelector('.ff-impact');
    if (sc && sc.value) data.failures.push({ severity: sv ? sv.value : 'medium', scenario: sc.value, impact: im ? im.value : '' });
  });
  return data;
}

function buildFormYAML(d) {
  var Y = escYAML; // shorthand
  var y = 'abc_version: "0.1.0"\n\n';
  y += 'identity:\n';
  y += '  name: "' + Y(d.slug) + '"\n';
  y += '  display_name: "' + Y(d.displayName) + '"\n';
  y += '  version: "' + Y(d.version) + '"\n';
  y += '  authors:\n';
  y += '    - name: "' + Y(d.author) + '"\n';
  if (d.org) y += '      org: "' + Y(d.org) + '"\n';
  y += '  license: "Apache-2.0"\n';
  y += '  created: "' + new Date().toISOString().split('T')[0] + '"\n';
  if (d.tags) {
    y += '  tags: [' + d.tags.split(',').map(function(t) { return '"' + Y(t.trim()) + '"'; }).join(', ') + ']\n';
  }
  y += '\nproblem_pattern:\n';
  y += '  category: "' + Y(d.category) + '"\n';
  y += '  description: >\n    ' + (d.description || '').replace(/\n/g, '\n    ') + '\n';
  y += '\nbehavior:\n';
  y += '  trigger:\n    type: "' + Y(d.trigger) + '"\n';
  if (d.inputs.length > 0) {
    y += '  inputs:\n';
    d.inputs.forEach(function(inp) {
      y += '    - name: "' + Y(inp.name) + '"\n';
      y += '      type: "' + Y(inp.type) + '"\n';
      y += '      description: "' + Y(inp.desc) + '"\n';
    });
  }
  if (d.outputs.length > 0) {
    y += '  outputs:\n';
    d.outputs.forEach(function(out) {
      y += '    - name: "' + Y(out.name) + '"\n';
      y += '      type: "' + Y(out.type) + '"\n';
      y += '      description: "' + Y(out.desc) + '"\n';
    });
  }
  if (d.assumptions.length > 0) {
    y += '\ndomain_assumptions:\n';
    var dataA = d.assumptions.filter(function(a) { return a.type === 'data'; });
    var envA = d.assumptions.filter(function(a) { return a.type === 'environment'; });
    var authA = d.assumptions.filter(function(a) { return a.type === 'authority'; });
    if (dataA.length > 0) {
      y += '  data_assumptions:\n';
      dataA.forEach(function(a, i) {
        y += '    - id: "DA-' + String(i + 1).padStart(3, '0') + '"\n';
        y += '      assumption: "' + Y(a.assumption) + '"\n';
        y += '      strength: "' + Y(a.strength) + '"\n';
      });
    }
    if (envA.length > 0) {
      y += '  environment_assumptions:\n';
      envA.forEach(function(a, i) {
        y += '    - id: "EA-' + String(i + 1).padStart(3, '0') + '"\n';
        y += '      assumption: "' + Y(a.assumption) + '"\n';
        y += '      strength: "' + Y(a.strength) + '"\n';
      });
    }
    if (authA.length > 0) {
      y += '  authority_assumptions:\n';
      authA.forEach(function(a, i) {
        y += '    - id: "AA-' + String(i + 1).padStart(3, '0') + '"\n';
        y += '      assumption: "' + Y(a.assumption) + '"\n';
        y += '      strength: "' + Y(a.strength) + '"\n';
      });
    }
  }
  if (d.adaptations.length > 0) {
    y += '\nadaptation_points:\n';
    d.adaptations.forEach(function(ap, i) {
      y += '  - id: "AP-' + String(i + 1).padStart(3, '0') + '"\n';
      y += '    name: "' + Y(ap.name) + '"\n';
      y += '    type: "' + Y(ap.type) + '"\n';
      if (ap.desc) y += '    description: >\n      ' + ap.desc.replace(/\n/g, '\n      ') + '\n';
    });
  }
  if (d.failures.length > 0) {
    y += '\ntrust:\n  failure_modes:\n';
    d.failures.forEach(function(fm, i) {
      y += '    - id: "FM-' + String(i + 1).padStart(3, '0') + '"\n';
      y += '      scenario: "' + Y(fm.scenario) + '"\n';
      y += '      impact: "' + Y(fm.impact) + '"\n';
      y += '      severity: "' + Y(fm.severity) + '"\n';
    });
  }
  y += '\nprovenance:\n';
  if (d.origin) {
    y += '  origin:\n';
    y += '    domain: "' + d.origin.toLowerCase().replace(/[^a-z0-9]+/g, '-') + '"\n';
    if (d.usecase) y += '    original_use_case: "' + d.usecase + '"\n';
  }
  if (d.fork) {
    y += '  lineage:\n';
    y += '    - version: "' + d.version + '"\n';
    y += '      domain: "' + d.fork.toLowerCase().replace(/[^a-z0-9]+/g, '-') + '"\n';
    y += '      date: "' + new Date().toISOString().split('T')[0] + '"\n';
    if (d.forkNotes) y += '      notes: "' + d.forkNotes + '"\n';
  }
  if (d.frameworks) {
    y += '  compatibility:\n    frameworks:\n';
    d.frameworks.split(',').forEach(function(f) {
      y += '      - name: "' + f.trim() + '"\n';
    });
  }
  return y;
}

function updateFormPreview() {
  var d = collectFormData();
  document.getElementById('yaml-preview').textContent = buildFormYAML(d);
}

function copyFormYAML() {
  var yaml = document.getElementById('yaml-preview').textContent;
  navigator.clipboard.writeText(yaml).then(function() {
    var btn = document.querySelector('.yaml-panel-actions .btn-copy');
    var orig = btn.textContent;
    btn.textContent = 'Copied!';
    setTimeout(function() { btn.textContent = orig; }, 2000);
  });
}

function downloadFormYAML() {
  var d = collectFormData();
  var yaml = buildFormYAML(d);

  // Download the YAML file
  var blob = new Blob([yaml], { type: 'text/yaml' });
  var url = URL.createObjectURL(blob);
  var a = document.createElement('a');
  a.href = url;
  a.download = (d.slug || 'behavior-card') + '.yaml';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);

  // Submit to Supabase if configured
  if (supabaseClient) {
    submitToSupabase(d, yaml);
  } else {
    showSubmitSuccess('Card downloaded! Once the platform database is connected, submissions will also be saved online.');
  }
}

async function submitToSupabase(formData, yamlContent) {
  var nextBtn = document.getElementById('btn-next');
  var origText = nextBtn.textContent;
  nextBtn.textContent = 'Submitting...';
  nextBtn.disabled = true;

  try {
    var { data, error } = await supabaseClient
      .from('card_submissions')
      .insert([{
        slug: formData.slug,
        display_name: formData.displayName,
        version: formData.version,
        author: formData.author,
        organization: formData.org,
        category: formData.category,
        description: formData.description,
        yaml_content: yamlContent,
        status: 'pending_review',
        submitted_at: new Date().toISOString()
      }]);

    if (error) throw error;
    showSubmitSuccess('Card submitted successfully! It will appear in the registry after review.');
  } catch (err) {
    console.error('Submission error:', err);
    showSubmitSuccess('Card downloaded! Online submission encountered an issue — the team has been notified.');
  } finally {
    nextBtn.textContent = origText;
    nextBtn.disabled = false;
  }
}

function showSubmitSuccess(message) {
  var overlay = document.getElementById('form-overlay');
  var existing = overlay.querySelector('.submit-success-msg');
  if (existing) existing.remove();

  var msg = document.createElement('div');
  msg.className = 'submit-success-msg';
  msg.innerHTML = '<div style="text-align:center; padding:40px 20px;">' +
    '<div style="font-size:48px; margin-bottom:16px;">&#10003;</div>' +
    '<h3 style="color:var(--cyan-glow); margin-bottom:12px;">Submission Complete</h3>' +
    '<p style="color:var(--text-secondary); margin-bottom:24px;">' + message + '</p>' +
    '<button onclick="closeSubmitForm(); this.closest(\'.submit-success-msg\').remove(); formStep=1; showFormStep(1);" ' +
    'style="padding:10px 24px; background:var(--cyan-glow); color:var(--bg-deep); border:none; border-radius:8px; cursor:pointer; font-weight:600;">Done</button>' +
    '</div>';
  msg.style.cssText = 'position:absolute; inset:0; background:var(--bg-surface); z-index:10; display:flex; align-items:center; justify-content:center; border-radius:16px;';
  overlay.querySelector('.form-container').appendChild(msg);
}

// ===== NEURAL NETWORK BACKGROUND =====
(function() {
  const canvas = document.getElementById('bg-canvas');
  const ctx = canvas.getContext('2d');
  let W, H, nodes = [], mouse = { x: -1000, y: -1000 };

  function resize() {
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
    initNodes();
  }

  function initNodes() {
    nodes = [];
    const count = Math.min(80, Math.floor(W * H / 12000));
    for (let i = 0; i < count; i++) {
      nodes.push({
        x: Math.random() * W,
        y: Math.random() * H * 0.7,
        vx: (Math.random() - 0.5) * 0.3,
        vy: (Math.random() - 0.5) * 0.2,
        r: Math.random() * 2 + 1,
        baseAlpha: Math.random() * 0.5 + 0.2
      });
    }
  }

  resize();
  window.addEventListener('resize', resize);
  document.addEventListener('mousemove', function(e) {
    mouse.x = e.clientX;
    mouse.y = e.clientY;
  });

  function animate() {
    ctx.clearRect(0, 0, W, H);

    // Draw connections
    for (let i = 0; i < nodes.length; i++) {
      for (let j = i + 1; j < nodes.length; j++) {
        const dx = nodes[i].x - nodes[j].x;
        const dy = nodes[i].y - nodes[j].y;
        const dist = Math.sqrt(dx * dx + dy * dy);
        if (dist < 180) {
          const alpha = (1 - dist / 180) * 0.15;
          const yFade = 1 - Math.max(nodes[i].y, nodes[j].y) / H;
          ctx.beginPath();
          ctx.moveTo(nodes[i].x, nodes[i].y);
          ctx.lineTo(nodes[j].x, nodes[j].y);
          ctx.strokeStyle = 'rgba(0, 229, 255, ' + (alpha * yFade) + ')';
          ctx.lineWidth = 0.5;
          ctx.stroke();
        }
      }
    }

    // Draw nodes and update
    nodes.forEach(function(n) {
      // Mouse interaction
      const mdx = n.x - mouse.x;
      const mdy = n.y - mouse.y;
      const mDist = Math.sqrt(mdx * mdx + mdy * mdy);
      let glow = 0;
      if (mDist < 200) {
        glow = (1 - mDist / 200) * 0.6;
        n.vx += mdx / mDist * 0.02;
        n.vy += mdy / mDist * 0.02;
      }

      // Fade based on Y position (brighter at top)
      const yFade = 1 - (n.y / H) * 0.8;
      const alpha = (n.baseAlpha + glow) * yFade;

      // Draw glow
      if (alpha > 0.1) {
        ctx.beginPath();
        ctx.arc(n.x, n.y, n.r * 4, 0, Math.PI * 2);
        ctx.fillStyle = 'rgba(0, 229, 255, ' + (alpha * 0.15) + ')';
        ctx.fill();
      }

      // Draw node
      ctx.beginPath();
      ctx.arc(n.x, n.y, n.r, 0, Math.PI * 2);
      ctx.fillStyle = 'rgba(0, 229, 255, ' + alpha + ')';
      ctx.fill();

      // Update position
      n.x += n.vx;
      n.y += n.vy;
      n.vx *= 0.99;
      n.vy *= 0.99;

      // Bounce off edges
      if (n.x < 0 || n.x > W) n.vx *= -1;
      if (n.y < 0 || n.y > H * 0.8) n.vy *= -1;
      n.x = Math.max(0, Math.min(W, n.x));
      n.y = Math.max(0, Math.min(H * 0.8, n.y));
    });

    requestAnimationFrame(animate);
  }
  animate();
})();
</script>

<button class="back-to-top" id="back-to-top">
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M18 15l-6-6-6 6"/></svg>
</button>
</body>
</html>
